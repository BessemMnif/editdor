(this.webpackJsonpeditdor=this.webpackJsonpeditdor||[]).push([[0],{161:function(e,t,n){},236:function(e,t,n){e.exports=n.p+"static/media/editdor.6cac600d.png"},237:function(e,t,n){e.exports=n.p+"static/media/WoT.89768410.png"},239:function(e,t,n){e.exports=n(340)},244:function(e,t,n){},245:function(e,t,n){},340:function(e,t,n){"use strict";n.r(t);var r=n(26),a=n.n(r),c=n(235),o=n.n(c),i=(n(161),n(244),n(245),n(12)),l=n.n(i),s=n(96),u=n(20),d=n(154),f=function(e,t,n){for(var r=Object(d.a)({},e),a=0,c=Object.entries(t);a<c.length;a++){var o=Object(u.a)(c[a],2),i=o[0],l=o[1];n.includes(i)||(r[i]=l)}return r},m=function(e){if(void 0===e&&!e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r.op))for(var a=0;a<r.op.length;a++){var c=Object(d.a)({},r);c.op=r.op[a],t.push(c)}else t.push(r)}return t};function p(e){var t={observeproperty:a.a.createElement(v,{form:e.form}),unobserveproperty:a.a.createElement(b,{form:e.form}),readproperty:a.a.createElement(x,{form:e.form}),writeproperty:a.a.createElement(h,{form:e.form}),invokeaction:a.a.createElement(y,{form:e.form})};return t[e.form.op]?t[e.form.op]:"action"===e.interactionType?a.a.createElement(y,{form:e.form}):"event"===e.interactionType?a.a.createElement(v,{form:e.form}):a.a.createElement(w,{form:e.form})}function v(e){return a.a.createElement("div",{className:"flex h-10 w-full bg-formOrange rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formOrange"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formOrange place-self-center text-center text-xs px-4"},"Observe")),a.a.createElement("div",{className:"place-self-center pl-3 text-base text-white overflow-hidden"},e.form.href))}function b(e){return a.a.createElement("div",{className:"flex h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"Unobserve")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden"},e.form.href))}function x(e){return a.a.createElement("div",{className:"flex h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formGreen place-self-center text-center text-xs px-4"},"Read")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden"},e.form.href))}function h(e){return a.a.createElement("div",{className:"flex h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formBlue place-self-center text-center text-xs px-4"},"Write")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden"},e.form.href))}function y(e){return a.a.createElement("div",{className:"flex h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"Invoke")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden"},e.form.href))}function w(e){return a.a.createElement("div",{className:"flex h-10 w-full bg-gray-300 rounded-md px-4 mt-2 bg-opacity-75 border-2 border-gray-300"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"place-self-center text-center text-xs px-4"},"Undefined")),a.a.createElement("div",{className:" place-self-center pl-3 text-base overflow-hidden"},e.form.href))}var g=["title","forms","description"];function E(e){var t;if(0===Object.keys(e.prop).length&&e.prop.constructor!==Object)return a.a.createElement("div",{className:"text-3xl text-white"},"Property could not be rendered because mandatory fields are missing.");var n=e.prop,r=m(e.prop.forms),c=f({name:e.propName},e.prop,g),o=Object.keys(c).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(c[e]))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("details",null,a.a.createElement("summary",{className:"text-xl text-gray-400 "},null!==(t=n.title)&&void 0!==t?t:e.propName),a.a.createElement("div",{className:"mb-4"},a.a.createElement("div",{className:"text-lg text-gray-400 pb-2"},n.description),a.a.createElement("ul",{className:"list-disc text-base text-gray-300 pl-8"},o),r.map((function(e,t){return a.a.createElement(p,{key:t,form:e,interactionType:"property",className:"last:pb-4"})})))))}var k=["title","forms","description"];function N(e){var t;if(0===Object.keys(e.action).length&&e.action.constructor!==Object)return a.a.createElement("div",{className:"text-3xl text-white"},"Action could not be rendered because mandatory fields are missing.");var n=e.action,r=m(e.action.forms),c=f({name:e.propName},e.action,k),o=Object.keys(c).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(c[e]))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("details",null,a.a.createElement("summary",{className:"text-xl text-gray-400"},null!==(t=n.title)&&void 0!==t?t:e.actionName),a.a.createElement("div",{className:"mb-4"},a.a.createElement("div",{className:"text-lg text-gray-400 pb-2"},n.description),a.a.createElement("ul",{className:"text-base text-gray-300 list-disc pl-8"},o),r.map((function(e,t){return a.a.createElement(p,{key:t,form:e,interactionType:"action"})})))))}var O=["title","forms","description"];function j(e){var t;if(0===Object.keys(e.event).length&&e.event.constructor!==Object)return a.a.createElement("div",{className:"text-3xl text-white"},"Event could not be rendered because mandatory fields are missing.");var n=e.event,r=m(e.event.forms),c=f({name:e.eventName},e.event,O),o=Object.keys(c).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(c[e]))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("details",null,a.a.createElement("summary",{className:"text-xl text-gray-400"},null!==(t=n.title)&&void 0!==t?t:e.eventName),a.a.createElement("div",{className:"mb-4"},a.a.createElement("div",{className:"text-lg text-gray-400 pb-2"},n.description),a.a.createElement("ul",{className:"text-base text-gray-300 list-disc pl-8"},o),r.map((function(e,t){return a.a.createElement(p,{key:t,form:e,interactionType:"event"})})))))}var T=a.a.createContext({offlineTD:"",theme:"dark",isModified:!1,name:"",fileHandle:"",updateOfflineTD:function(e){},updateIsModified:function(e){},setFileHandle:function(e){}}),D=function(e){switch(e){case"properties":return'<div class="form-check">\n                        <input class="form-check-input" type="checkbox" value="writeproperty" id="checkbox1">\n                        <label class="form-check-label" for="checkbox1">\n                        writeproperty\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <input class="form-check-input" type="checkbox" value="readproperty" id="checkbox2">\n                        <label class="form-check-label" for="checkbox2">\n                        readproperty\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <input class="form-check-input" type="checkbox" value="observeproperty" id="checkbox3">\n                        <label class="form-check-label" for="checkbox3">\n                        observeproperty\n                    </label>\n                    </div>\n                    <div class="form-check">\n                        <input class="form-check-input" type="checkbox" value="unobserveproperty" id="checkbox4">\n                        <label class="form-check-label" for="checkbox4">\n                        unobserveproperty\n                        </label>\n                    </div>';case"events":return'<div class="form-check">\n                        <input class="form-check-input" type="checkbox" value="subscribeevent" id="checkbox1">\n                        <label class="form-check-label" for="checkbox1">\n                        subscribeevent\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <input class="form-check-input" type="checkbox" value="unsubscribeevent" id="checkbox2">\n                        <label class="form-check-label" for="checkbox2">\n                        unsubscribeevent\n                        </label>\n                    </div>';default:return""}},B=n(204),C=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.abrupt("return",B.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2","3"]}).queue([{title:"Propertytitle",text:"Please enter a name for your new Property"},{title:"Propertytype",text:"Please enter a type for your new Property",input:"select",inputOptions:{number:"number",integer:"integer",boolean:"boolean",string:"string",object:"object",array:"array"},inputPlaceholder:"Select a type"},{title:"Add a Form ",text:"Do you want to add a form to your Property?",focusConfirm:!0,confirmButtonText:"Yes",showCancelButton:!1,showDenyButton:!0,denyButtonText:"No",input:null}]).then((function(e){if(!e.dismiss){if(e.value[2])return B.mixin({title:"Add Form",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue([{text:"Select an Operation or multiple Operations",html:D("properties"),preConfirm:function(){var t=["1","2","3","4"].map((function(e){return document.getElementById("checkbox"+e).checked?document.getElementById("checkbox"+e).value:void 0})).filter((function(e){return void 0!==e}));e.value[3]=t}},{input:"text",title:"Form Href",text:"Please enter a href where your Property is reachable"}]).then((function(n){if(!n.dismiss){var r=n.value,a=e.value;return t={title:a[0],type:a[1],forms:[{op:a[3],href:r[1]}]}}}));var n=e.value;return e[2]||(t={title:n[0],type:n[1]}),console.log("Property",t),t}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=n(204),P=function(){var e={};return F.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue([{title:"Actiontitle",text:"Please enter a name for your new Action"},{title:"Add a Form ",text:"Do you want to add a form to your Action?",focusConfirm:!0,confirmButtonText:"Yes",showCancelButton:!1,showDenyButton:!0,denyButtonText:"No",input:null}]).then((function(t){if(!t.dismiss){if(t.value[1])return F.mixin({title:"Add Form",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1"]}).queue([{input:"text",title:"Form Href",text:"Please enter a href where your Action is reachable"}]).then((function(n){if(!n.dismiss){var r=t.value,a=n.value;return e={title:r[0],forms:[{op:"invokeaction",href:a[1]}]}}}));var n=t.value;return n[1]||(e={title:n[0]}),e}}))},I=n(204),M=function(){var e={};return I.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue([{title:"Eventtitle",text:"Please enter a name for your new Event"},{title:"Add a Form ",text:"Do you want to add a form to your Event?",focusConfirm:!0,confirmButtonText:"Yes",showCancelButton:!1,showDenyButton:!0,denyButtonText:"No",input:null}]).then((function(t){if(!t.dismiss){if(t.value[1])return I.mixin({title:"Add Form",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue([{text:"Select an Operation or multiple Operations",html:D("events"),preConfirm:function(){var e=["1","2"].map((function(e){return document.getElementById("checkbox"+e).checked?document.getElementById("checkbox"+e).value:void 0})).filter((function(e){return void 0!==e}));console.log("operations",e),t.value[2]=e}},{input:"text",title:"Form Href",text:"Please enter a href where your Event is reachable"}]).then((function(n){if(!n.dismiss){var r=t.value,a=n.value;return e={title:r[0],forms:[{op:r[2],href:a[1]}]}}}));var n=t.value;return n[1]||(e={title:n[0]}),e}}))},S={},A={},H="";function W(){var e=Object(r.useContext)(T);try{A=S,S=JSON.parse(e.offlineTD),H=""}catch(b){H=b.message,S=A}if(!Object.keys(S).length)return a.a.createElement("div",{className:"flex h-full w-full bg-gray-500 justify-center align-center text-center "},a.a.createElement("div",{className:"text-4xl text-white place-self-center"},'Start writing a new TD by clicking "New TD"'));var t,n,c,o,i=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:(t=e.sent)&&m("events",t.title,t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:(t=e.sent)&&m("actions",t.title,t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:(t=e.sent)&&m("properties",t.title,t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(t,n,r){S[t]||(S[t]={}),S[t][n]=r,e.updateOfflineTD(JSON.stringify(S,null,2))};S&&(S.properties&&(t=Object.keys(S.properties).map((function(e,t){return a.a.createElement(E,{base:S.base,prop:S.properties[e],propName:e,key:t})}))),S.actions&&(n=Object.keys(S.actions).map((function(e,t){return a.a.createElement(N,{action:S.actions[e],actionName:e,key:t})}))),S.events&&(c=Object.keys(S.events).map((function(e,t){return a.a.createElement(j,{event:S.events[e],eventName:e,key:t})}))),o=S);var p=f(S.id?{id:S.id}:{},S,["id","properties","actions","events","description","title"]),v=Object.keys(p).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(p[e]))}));return a.a.createElement("div",{className:"h-full w-full bg-gray-500 p-8 overflow-scroll overflow-x-hidden"},H.length>0&&a.a.createElement("div",{className:"flex h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"Error")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden"},H)),void 0!==o&&Object.keys(o).length>0&&a.a.createElement("div",null,a.a.createElement("div",{className:"text-3xl text-white"},o.title),a.a.createElement("ul",{className:"list-disc text-lg text-gray-400 pt-1 pl-8 "},v),a.a.createElement("div",{className:"text-xl text-white pt-4"},o.description)),a.a.createElement("div",{className:"flex justify-between items-end pt-8 pb-4"},a.a.createElement("div",{className:"text-2xl text-white"},"Properties"),a.a.createElement("div",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2",onClick:d},"Add new Property")),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4"},t)),a.a.createElement("div",{className:"flex justify-between items-end pt-8 pb-4"},a.a.createElement("div",{className:"text-2xl text-white pl-1"},"Actions"),a.a.createElement("div",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2",onClick:u},"Add new Action")),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4"},n)),a.a.createElement("div",{className:"flex justify-between items-end pt-8 pb-4"},a.a.createElement("div",{className:"text-2xl text-white"},"Events"),a.a.createElement("div",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2",onClick:i},"Add new Event")),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4"},c)),a.a.createElement("div",{className:"h-16"}))}var L=n(238),R={fileMatch:["*/*"],uri:"https://raw.githubusercontent.com/thingweb/thingweb-playground/%40thing-description-playground/web%401.0.0/packages/playground-core/td-schema.json"},J={selectOnLineNumbers:!0,automaticLayout:!0,lineDecorationsWidth:20},q=function(){var e=Object(r.useContext)(T),t=function(){var t=Object(s.a)(l.a.mark((function t(n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updateOfflineTD(n);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:"w-full h-full"},a.a.createElement(L.a,{options:J,theme:"vs-"+e.theme,language:"json",value:e.offlineTD,editorWillMount:function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!0,schemas:[R]})},editorDidMount:function(e,t){e.onDidChangeModelDecorations((function(){var t=e.getModel();null!==t&&t.getModeId()}))},onChange:function(){var e=Object(s.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))},U=n(236),_=n.n(U),K=n(237),Y=n.n(K);function G(e){return a.a.createElement("div",{onClick:e.onClick,className:" flex bg-blue-400                  hover:bg-blue-300  text-white  font-bold  py-2 px-5  rounded  w-32  h-12 text-center  cursor-pointer justify-center "},a.a.createElement("div",{className:"place-self-center"},e.children))}function X(){return"".concat(z("ID","urn:thing-id","thing-id","url"),"\n            ").concat(z("Title","Thing Title","thing-title","text"),"\n            ").concat(z("Base","http://www.example.com/thing-path","thing-base","url"))}var z=function(e,t,n,r){return'<div class="md:flex md:items-center mb-6">\n    <div class="md:w-1/6">\n        <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="'.concat(n,'">\n            ').concat(e,'\n        </label>\n    </div>\n    <div class="md:w-5/6">\n        <input class="bg-gray-200 \n        appearance-none \n        border-2 border-gray-200 rounded w-full \n        py-2 px-4 \n        text-gray-700 \n        leading-tight \n        focus:outline-none \n        focus:bg-white \n        focus:border-blue-500" \n        id="').concat(n,'" \n        placeholder="').concat(t,'"\n        type="').concat(r,'">\n    </div>\n</div>')},V=n(204);function Q(){return Z.apply(this,arguments)}function Z(){return(Z=Object(s.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n="",r="",e.abrupt("return",V.mixin({input:"text",backdrop:!0,reverseButtons:!0,confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2","3"]}).queue([{title:"TD Identifiers",html:X(),input:null,preConfirm:function(){var e=document.getElementById("thing-id").value,n=document.getElementById("thing-title").value,r=document.getElementById("thing-base").value;t={id:e,title:n,base:r}}},{title:"TD Description",html:'<textarea rows="5"\n    class="bg-gray-200 \n    appearance-none \n    border-2 border-gray-200 rounded w-full \n    py-2 px-4 \n    text-gray-700 \n    leading-tight \n    focus:outline-none \n    focus:bg-white \n    focus:border-blue-500" \n    id="thing-description" \n    placeholder="A short description of what the Thing does...">',input:null,preConfirm:function(){n=document.getElementById("thing-description").value}},{title:"TD Security",html:'\n    <div class="relative">\n        <select class="block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="thing-security">\n            <option>nosec</option>\n            <option>basic</option>\n            <option>digest</option>\n            <option>bearer</option>\n            <option>psk</option>\n            <option>oauth2</option>\n            <option>apikey</option>\n        </select>\n        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">\n            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>\n        </div>\n  </div>',input:null,preConfirm:function(){r=document.getElementById("thing-security").value}}]).then((function(e){if(!e.dismiss){var a={"@context":"https://www.w3.org/2019/wot/td/v1"};a.title=""!==t.title?t.title:"ediTDor Thing",a.id=""!==t.id?t.id:"urn:editdor-thing-id",""!==t.base&&(a.base=""!==t.base?t.base:"/"),""!==n&&(a.description=n);var c={};return c["".concat(r,"_sc")]={scheme:r},a.securityDefinitions=c,a.security="".concat(r,"_sc"),a.properties={},a.actions={},a.events={},a}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){var e=Object(r.useContext)(T),t=Object(r.useCallback)((function(){return"chooseFileSystemEntries"in window||"showOpenFilePicker"in window}),[]),n=Object(r.useCallback)(Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isModified){t.next=2;break}return t.abrupt("return",!0);case 2:return console.log("verifyDiscard",e.isModified),"Discard changes? All changes you made to your TD will be lost.",t.next=6,window.confirm("Discard changes? All changes you made to your TD will be lost.");case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),[e.isModified]),c=Object(r.useCallback)((function(e){return e.text?e.text():h(e)}),[]),o=Object(r.useCallback)(function(){var t=Object(s.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=e,t.next=4,c(n);case 4:t.t1=t.sent,t.t0.updateOfflineTD.call(t.t0,t.t1),e.setFileHandle(r||n.name),t.next=14;break;case 9:t.prev=9,t.t2=t.catch(0),a="An error occured reading ".concat(e.offlineTD),console.error(a,t.t2),alert(a);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),[e,c]),i=Object(r.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(r){var a,c,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(t()){e.next=12;break}return e.next=7,v();case 7:if(!(a=e.sent)){e.next=11;break}return e.next=11,o(a);case 11:return e.abrupt("return");case 12:return e.prev=12,e.next=15,b();case 15:return c=e.sent,e.next=18,c.getFile();case 18:return i=e.sent,e.next=21,o(i,c);case 21:e.next=28;break;case 23:e.prev=23,e.t0=e.catch(12),s="We ran into an error trying to open your TD.",console.error(s,e.t0),alert(s);case 28:case"end":return e.stop()}}),e,null,[[12,23]])})));return function(t){return e.apply(this,arguments)}}(),[o,n,t]),u=Object(r.useCallback)(function(){var t=Object(s.a)(l.a.mark((function t(n,r){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.createWriter){t.next=9;break}return t.next=3,n.createWriter();case 3:return a=t.sent,t.next=6,a.write(0,r);case 6:return t.next=8,a.close();case 8:return t.abrupt("return");case 9:return t.next=11,n.createWritable();case 11:return c=t.sent,t.next=14,c.write(r);case 14:return t.next=16,c.close();case 16:setTimeout((function(){e.updateOfflineTD(r),e.updateIsModified(!1)}),500);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]),d=Object(r.useCallback)((function(e,t){var n=document.getElementById("aDownload");e=e||"untitled.txt";var r=new File([t],"",{type:"text/plain"});n.href=window.URL.createObjectURL(r),n.setAttribute("download",e),n.click()}),[]),f=Object(r.useCallback)(Object(s.a)(l.a.mark((function n(){var r,a,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t()){n.next=3;break}return d(e.name,e.offlineTD),n.abrupt("return");case 3:return n.prev=3,n.next=6,x();case 6:r=n.sent,n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(3),a="We ran into an error trying to save your TD.",console.error(a,n.t0),n.abrupt("return",alert(a));case 14:return n.prev=14,n.next=17,u(r,e.offlineTD);case 17:e.setFileHandle(r),e.updateIsModified(!1),n.next=26;break;case 21:n.prev=21,n.t1=n.catch(14),c="Unfortunately we were unable to save your TD.",console.error(c,n.t1),alert(c);case 26:case"end":return n.stop()}}),n,null,[[3,9],[14,21]])}))),[d,t,e,u]),m=Object(r.useCallback)(Object(s.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q();case 2:(n=t.sent)&&e.updateOfflineTD(JSON.stringify(n,null,"\t"));case 4:case"end":return t.stop()}}),t)}))),[e]),p=Object(r.useCallback)(Object(s.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.fileHandle){t.next=5;break}return t.next=4,f();case 4:return t.abrupt("return",t.sent);case 5:return t.next=7,u(e.fileHandle,e.offlineTD);case 7:t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),n="Unfortunately we were unable to save your TD.",console.error(n,t.t0),alert(n);case 14:case"end":return t.stop()}}),t,null,[[0,9]])}))),[e,f,u]),v=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=document.getElementById("fileInput");n.onchange=function(r){var a=n.files[0];return a?e(a):t(new Error("AbortError"))},n.click()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){return"showOpenFilePicker"in window?window.showOpenFilePicker({types:[{description:"Thing Description",accept:{"application/ld+json":[".jsonld",".json"]}}]}).then((function(e){return e[0]})):window.chooseFileSystemEntries()},x=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("showSaveFilePicker"in window)){e.next=5;break}return t={types:[{description:"Thing Description",accept:{"application/ld+json":[".jsonld",".json"]}}]},e.next=4,window.showSaveFilePicker(t);case 4:return e.abrupt("return",e.sent);case 5:return n={type:"save-file",accepts:[{description:"Thing Description",extensions:[".jsonld",".json"],mimeTypes:["application/ld+json"]}]},e.next=8,window.chooseFileSystemEntries(n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("loadend",(function(e){var n=e.srcElement.result;return t(n)})),n.readAsText(e)}))};return Object(r.useEffect)((function(){var e=function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),e.stopPropagation(),p()),(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"o"===e.key&&(e.preventDefault(),e.stopPropagation(),i()),(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"n"===e.key&&(e.preventDefault(),e.stopPropagation(),m())};return document.addEventListener("keydown",e,!1),window.onbeforeunload=function(e){var t="Important: Please click on 'Save' button to leave this page.";return"undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t},function(){document.removeEventListener("keydown",e,!1)}}),[i,p,m]),a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"flex justify-between items-center h-16 bg-blue-500"},a.a.createElement("div",{className:"flex items-center"},a.a.createElement("img",{className:"pl-2 h-12",src:Y.a,alt:"WOT"}),a.a.createElement("div",{className:"w-2"}),a.a.createElement("img",{className:"pl-2 h-8",src:_.a,alt:"LOGO"})),a.a.createElement("div",{className:"flex space-x-2 pr-2"},a.a.createElement(G,{onClick:m},"New TD/TM"),a.a.createElement(G,{onClick:i},"Open TD/TM"),a.a.createElement(G,{onClick:p},"Save"),a.a.createElement(G,{onClick:f},"Save As"))),a.a.createElement("input",{className:"h-0",type:"file",id:"fileInput",style:{display:"none"}}),a.a.createElement("a",{className:"h-0",id:"aDownload",href:"/",style:{display:"none"}},"download"))}var ee="UPDATE_OFFLINE_TD",te="UPDATE_IS_MODFIED",ne="SET_FILE_HANDLE",re=function(e,t){switch(t.type){case ee:return function(e,t){return console.log("updateofflineTD"),Object(d.a)(Object(d.a)({},t),{},{offlineTD:e,isModified:!0})}(t.offlineTD,e);case te:return function(e,t){return console.log("updateIsModified",e),Object(d.a)(Object(d.a)({},t),{},{isModified:e})}(t.isModified,e);case ne:return function(e,t){return Object(d.a)(Object(d.a)({},t),{},{fileHandle:e})}(t.fileHandle,e);default:return e}},ae=function(e){var t=Object(r.useReducer)(re,{offlineTD:"",theme:"dark"}),n=Object(u.a)(t,2),c=n[0],o=n[1];return a.a.createElement(T.Provider,{value:{offlineTD:c.offlineTD,theme:c.theme,isModified:c.isModified,name:c.name,fileHandle:c.fileHandle,updateOfflineTD:function(e){o({type:ee,offlineTD:e})},updateIsModified:function(e){o({type:te,isModified:e})},setFileHandle:function(e){o({type:ne,fileHandle:e})}}},e.children)},ce=function(e,t){var n,r=document.getElementById("first"),a=document.getElementById("second"),c=function(c){var o={x:c.clientX-n.e.clientX,y:c.clientY-n.e.clientY};"H"===t&&(o.x=Math.min(Math.max(o.x,-n.firstWidth),n.secondWidth),e.style.left=n.offsetLeft+o.x+"px",r.style.width=n.firstWidth+o.x+"px",a.style.width=n.secondWidth-o.x+"px")};e.onmousedown=function(t){n={e:t,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,firstWidth:r.offsetWidth,secondWidth:a.offsetWidth},document.onmousemove=c,document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}},oe=function(){return Object(r.useEffect)((function(){ce(document.getElementById("separator"),"H")}),[]),a.a.createElement(ae,null,a.a.createElement("main",{className:"h-screen w-full"},a.a.createElement($,null),a.a.createElement("div",{className:"splitter"},a.a.createElement("div",{className:"w-5/12",id:"first"},a.a.createElement(q,null)),a.a.createElement("div",{id:"separator"}),a.a.createElement("div",{className:"w-7/12",id:"second"},a.a.createElement(W,null)))))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(oe,null)),document.getElementById("root"))}},[[239,1,2]]]);
//# sourceMappingURL=main.5a1e6284.chunk.js.map