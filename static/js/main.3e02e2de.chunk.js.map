{"version":3,"sources":["assets/editdor.png","assets/WoT.png","context/ediTDorContext.js","util.js","components/Dialogs/DialogTemplate.jsx","components/Dialogs/AddFormDialog.jsx","components/InfoIcon/InfoIcon.jsx","components/InfoIcon/InfoTooltips.jsx","components/TDViewer/Form.jsx","components/Dialogs/DialogComponents.jsx","components/Dialogs/AddActionDialog.jsx","components/Dialogs/AddEventDialog.jsx","components/Dialogs/AddPropertyDialog.jsx","components/TDViewer/Action.jsx","components/TDViewer/Event.jsx","components/TDViewer/Property.jsx","components/TDViewer/SearchBar.jsx","components/TDViewer/InteractionSection.jsx","components/TDViewer/RenderedObject.jsx","components/TDViewer/TDViewer.jsx","components/Editor/Editor.jsx","components/App/AppHeader/Button.jsx","components/Dialogs/ShareDialog.jsx","components/Dialogs/ConvertTmDialog.jsx","components/Dialogs/CreateTdDialog.jsx","components/App/AppHeader/AppHeader.jsx","components/App/AppFooter.jsx","context/editorReducers.js","context/GlobalState.js","components/App/App.jsx","serviceWorker.js","index.js"],"names":["module","exports","React","createContext","offlineTD","theme","isModified","isThingModel","undefined","name","fileHandle","updateOfflineTD","td","updateIsModified","updateIsThingModel","setFileHandle","handle","removeForm","form","addForm","addActionForm","params","addEventForm","removeOneOfAKindReducer","kind","oneOfAKind","buildAttributeListObject","firstAttribute","object","dontRender","attributeListObject","Object","entries","key","value","includes","separateForms","forms","newForms","i","length","Array","isArray","op","temp","push","hasForms","itemToCheck","checkIfFormIsInElement","element","deepCompare","y","DialogTemplate","props","title","description","children","cancelText","onCancel","submitText","onSubmit","className","onClick","AddFormDialog","forwardRef","ref","context","useContext","ediTDorContext","useState","display","setDisplay","type","toUpperCase","slice","interaction","interactionName","useEffect","useImperativeHandle","openModal","open","close","checkIfFormExists","x","checkIfFormIsInItem","formSelection","operationsSelections","htmlFor","id","placeholder","onChange","clearErrorMessage","ReactDOM","createPortal","operations","map","document","getElementById","checked","filter","href","trim","showErrorMessage","propName","actionName","eventName","JSON","parse","_","stringify","addFormToInteraction","msg","textContent","classList","remove","add","e","formCheckbox","readOnly","InfoIconWrapper","window","tooltip","html","InfoIcon","color","size","data-html","data-type","data-tip","data-background-color","TooltipContent","this","getFormsTooltipContent","tooltipMapper","Form","formChooser","ObserveForm","UnobserveForm","ObserveAllForm","UnobserveAllForm","ReadForm","ReadMultipleForm","formIndex","ReadAllForm","WriteForm","WriteMultipleForm","WriteAllForm","InvokeForm","interactionType","UndefinedForm","DialogTextField","label","autoFocus","DialogTextArea","rows","DialogDropdown","options","DialogCheckbox","AddActionDialog","addActionToTd","action","onAddAction","AddEventDialog","addEventToTd","event","onAddEvent","NO_TYPE","AddPropertyDialog","addPropertyToTd","property","observable","dataType","onAddProperty","alreadyRenderedKeys","Action","addFormDialog","useRef","keys","constructor","attributes","current","Event","Property","prop","SearchBar","autoComplete","onKeyUp","aria-label","ariaLabel","disabled","SORT_ASC","oldTd","InteractionSection","setFilter","sortOrder","setSortOrder","toLowerCase","parsedTd","addInteractionDialog","buildChildren","filteredInteractions","filtered","indexOf","forEach","applyFilter","properties","index","actions","events","createPropertyDialog","target","ordered","toSort","sort","a","b","nameA","nameB","localeCompare","sortedObject","reverse","sortKeysInObject","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","RenderedObject","showChildren","setShowChildren","handleClick","useCallback","val","k","v","indicator","i1","k1","v1","m1","tdJSON","oldtdJSON","error","TDViewer","metaData","message","mapping","require","tdSchema","tmSchema","editorOptions","selectOnLineNumbers","automaticLayout","lineDecorationsWidth","JSONEditorComponent","schemas","proxy","setProxy","editorInstance","editorWillMount","monaco","languages","json","jsonDefaults","setDiagnosticsOptions","validate","enableSchemaRequest","console","warn","Proxy","set","jsonSchemaObjects","fileMatch","uri","addSchema","removeSchema","splice","fetchSchema","url","URL","fetch","res","schema","editorText","state","atContext","log","contextKey","find","language","editorDidMount","editor","onDidChangeModelDecorations","model","getModel","getModeId","Button","ShareDialog","copyLinkToClipboard","createPermalink","focusPermalinkField","urlField","createPermalinkField","parsedTD","location","encodeURIComponent","defaultValue","link","hasFocus","navigator","clipboard","writeText","then","err","setTimeout","select","ConvertTmDialog","htmlInputs","setHtmlInputs","createHtmlInputs","convertTmToTd","result","regex","startIindices","exec","endIndices","placeholders","Set","holder","mappingObject","elem","split","join","permalink","encodeURI","CreateTdDialog","content","buildForm","createNewTD","formField","base","tdDescription","tdSecurity","thing","securityDefinitions","scheme","AppHeader","hasNativeFS","verifyDiscard","confirm","read","file","text","_readFileHTML5","readFile","alert","openFile","getFileHTML5","getFileHandle","getFile","writeFile","contents","createWriter","writer","write","createWritable","writable","saveAsHTML5","filename","aDownload","File","createObjectURL","setAttribute","click","saveFileAs","getNewFileHandle","saveFile","Promise","resolve","reject","fileInput","onchange","files","Error","showOpenFilePicker","types","accept","handles","chooseFileSystemEntries","opts","showSaveFilePicker","accepts","extensions","mimeTypes","reader","FileReader","addEventListener","srcElement","readAsText","search","searchParams","get","shortcutHandler","platform","match","metaKey","ctrlKey","preventDefault","stopPropagation","openCreateTdDialog","onbeforeunload","returnValue","removeEventListener","convertTmDialog","shareDialog","createTdDialog","src","wot","alt","logo","style","AppFooter","bytes","megaBytes","propertiesCount","actionsCount","eventsCount","TextEncoder","encode","toFixed","process","rel","UPDATE_OFFLINE_TD","UPDATE_IS_MODFIED","UPDATE_IS_THINGMODEL","SET_FILE_HANDLE","REMOVE_FORM_FROM_TD","ADD_PROPERTYFORM_TO_TD","ADD_ACTIONFORM_TO_TD","ADD_EVENTFORM_TO_TD","REMOVE_ONE_OF_A_KIND_FROM_TD","editdorReducer","updateOfflineTDReducer","updateFileHandleReducer","removeFormReducer","oneOfAKindName","addPropertyFormReducer","addActionFormReducer","addEventFormReducer","GlobalState","useReducer","editdorState","dispatch","Provider","dragElement","direction","md","first","second","onMouseMove","delta","clientX","clientY","Math","min","max","firstWidth","secondWidth","left","offsetLeft","onmousedown","offsetTop","offsetWidth","onmousemove","onmouseup","App","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","render","StrictMode","origin","headers","response","contentType","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.3e02e2de.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/editdor.6cac600d.png\";","module.exports = __webpack_public_path__ + \"static/media/WoT.89768410.png\";","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from 'react';\n\nexport default React.createContext({\n  offlineTD: '',\n  theme: 'dark',\n  isModified: false,\n  isThingModel: undefined,\n  name: '',\n  fileHandle:'',\n  updateOfflineTD: td => {},\n  updateIsModified: isModified => {},\n  updateIsThingModel: isThingModel => {},\n  setFileHandle: handle => {},\n  removeForm: form => {},\n  addForm: form => {},\n  addActionForm: params => {},\n  addEventForm: params => {},\n  removeOneOfAKindReducer: (kind, oneOfAKind) => {}\n});","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\n/**\n * \n * @param {*} firstAttribute \n * @param {*} object \n * @param {*} dontRender is a list of keys that shouldn't be packed into the attribute list.\n * \n * @description\n * Parses all key-value pairs of an object into an object'. \n */\nexport const buildAttributeListObject = (firstAttribute, object, dontRender) => {\n    let attributeListObject = { ...firstAttribute }\n\n    for (const [key, value] of Object.entries(object)) {\n        if (!dontRender.includes(key)) {\n            attributeListObject[key] = value\n        }\n    }\n\n    return attributeListObject;\n}\n\n/**\n * \n * @param {*} forms \n * \n * @description\n * Converts Forms that have an array as the \"op\" value into multiple separate Forms \n * which only have a string as \"op\" value.\n */\nexport const separateForms = (forms) => {\n    if (forms === undefined && !forms) {\n        return []\n    }\n\n    const newForms = [];\n\n    for (let i = 0; i < forms.length; i++) {\n        const form = forms[i];\n\n        if (!Array.isArray(form.op)) {\n            newForms.push(form);\n            continue;\n        }\n\n        for (let i = 0; i < form.op.length; i++) {\n            const temp = { ...form };\n            temp.op = form.op[i];\n            newForms.push(temp);\n        }\n    }\n\n    return newForms;\n}\n\n\n\n/**\n * \n * @param {itemToCheck} itemToCheck \n * \n * Checks if item contains Forms\n * \n */\nexport const hasForms = (itemToCheck) => {\n    return itemToCheck.forms ? true : false;\n}\n\nexport const checkIfFormIsInItem = (form, itemToCheck) => {\n    for (const element of itemToCheck.forms) {\n        if (typeof (form.op) === \"string\") {\n            return checkIfFormIsInElement(form, element)\n        } else {\n            for (const x of form.op) {\n                if (typeof (element.op) === 'string') {\n                    if (element.op === x) {\n                        return true;\n                    }\n                } else {\n                    if (element.op.includes(x)) {\n                        let deepCompare = true;\n                        for (const y in form) {\n                            if (y !== 'op') {\n                                if (element[y] !== form[y]) {\n                                    deepCompare = false;\n                                }\n                            }\n                        }\n                        if (deepCompare)\n                            return true\n                    }\n                }\n            }\n        }\n    }\n    return false\n}\n\nconst checkIfFormIsInElement = (form, element) => {\n    if (typeof (element.op) === 'string') {\n        if (element.op === form.op) {\n            return true;\n        }\n    } else {\n        if (element.op.includes(form.op)) {\n            let deepCompare = true;\n            for (const y in form) {\n                if (y !== 'op') {\n                    if (element[y] !== form[y]) {\n                        deepCompare = false;\n                    }\n                }\n            }\n            if (deepCompare)\n                return true\n        }\n    }\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from 'react';\n\nexport const DialogTemplate = (props) => {\n    const title = props.title ?? \"Default Title\";\n    const description = props.description ?? \"Default description, please override.\";\n    const children = props.children ?? <></>;\n\n    const cancelText = props.cancelText ?? \"Cancel\";\n    const onCancel = props.onCancel ?? (() => { });\n\n    const submitText = props.submitText ?? \"Submit\";\n    const onSubmit = props.onSubmit ?? (() => { });\n\n\n    return (<div className=\"flex bg-gray-400 bg-opacity-50 w-full h-full absolute top-0 left-0 justify-center items-center z-10 text-white\">\n        <div className=\"bg-gray-500 w-1/3 flex flex-col justify-start rounded-xl shadow-xl p-4 max-h-screen\">\n            <div className=\"flex flex-row justify-start items-center  \">\n                <h1 className=\"text-xl font-bold flex-grow pl-2\">{title}</h1>\n            </div>\n            <h2 className=\"text-gray-400 py-2 pl-2\">{description}</h2>\n            <div className=\"overflow-auto p-2\">\n                {children}\n            </div>\n            <div className=\"flex justify-end pt-4 p-2\">\n                <button className=\"text-white bg-gray-500 p-2 mr-1 rounded-md\" onClick={() => { onCancel(); }}>{cancelText}</button>\n                <button className=\"flex text-white bg-blue-500 p-2 rounded-md\" onClick={() => onSubmit()}>{submitText}</button>\n            </div>\n        </div>\n    </div>);\n};\n\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useContext, useEffect, useImperativeHandle } from 'react';\nimport ReactDOM from \"react-dom\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { checkIfFormIsInItem, hasForms } from \"../../util.js\";\nimport { DialogTemplate } from \"./DialogTemplate\";\n\nexport const AddFormDialog = forwardRef((props, ref) => {\n    const context = useContext(ediTDorContext);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    const type = props.type ?? \"\";\n    const name = type && type[0].toUpperCase() + type.slice(1);\n    const interaction = props.interaction ?? {};\n    const interactionName = props.interactionName ?? \"\";\n\n    useEffect(() => {\n    }, [display, context]);\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    const checkIfFormExists = (form) => {\n        if (hasForms(interaction)) {\n            return checkIfFormIsInItem(form, interaction)\n        }\n        return false\n    }\n\n    const addFormToInteraction = (form) => {\n        switch (type) {\n            case 'property':\n                context.addForm({ propName: interactionName, form: form });\n                break;\n            case 'action':\n                context.addActionForm({ actionName: interactionName, form: form });\n                break;\n            case 'event':\n                context.addEventForm({ eventName: interactionName, form: form });\n                break;\n            case 'thing':\n                let td = {}\n                try {\n                    td = JSON.parse(context.offlineTD);\n                } catch (_) { }\n                if (!hasForms(td)) {\n                    td.forms = [];\n                }\n                td.forms.push(form);\n                context.updateOfflineTD(JSON.stringify(td, null, 2))\n                break;\n            default: { }\n        }\n    }\n\n    const formSelection = operationsSelections(type);\n    const children = <>\n        <label className=\"text-sm text-gray-400 font-medium pl-3\">Operations:</label>\n        <div className=\"p-1\">\n            {formSelection}\n        </div>\n        <div className=\"p-1 pt-2\">\n            <label htmlFor=\"form-href\" className=\"text-sm text-gray-400 font-medium pl-2\">Href:</label>\n            <input\n                type=\"text\"\n                name=\"form-href\"\n                id=\"form-href\"\n                className=\"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500\"\n                placeholder=\"http://example.com/href\"\n                onChange={() => { clearErrorMessage(); }}\n            />\n            <span id=\"form-href-info\" className=\"text-xs text-red-400 pl-2\"></span>\n        </div>\n    </>\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={() => {\n                    let form = {};\n                    form.op = operations(type).map(x => {\n                        return document.getElementById('form-' + x).checked ? document.getElementById('form-' + x).value : undefined\n                    }).filter(y => y !== undefined);\n\n                    const href = document.getElementById(\"form-href\").value;\n                    form.href = href !== \"\" ? href.trim() : \"/\";\n\n                    if (form.op.length === 0) {\n                        showErrorMessage(\"You have to select at least one operation ...\");\n                    } else if (checkIfFormExists(form)) {\n                        showErrorMessage(\"A Form for one of the selected operations already exists ...\");\n                    } else {\n                        addFormToInteraction(form);\n                        close();\n                    }\n                }}\n                submitText={\"Add\"}\n                children={children}\n                title={`Add ${name} Form`}\n                description={`Tell us how this ${name} can be interfaced by selecting operations below and providing an href.`}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\nconst showErrorMessage = (msg) => {\n    document.getElementById(\"form-href-info\").textContent = msg;\n    document.getElementById(\"form-href\").classList.remove(\"border-gray-600\");\n    document.getElementById(\"form-href\").classList.add(\"border-red-400\");\n}\n\nconst clearErrorMessage = () => {\n    document.getElementById(\"form-href\").classList.add(\"border-gray-600\");\n    document.getElementById(\"form-href\").classList.remove(\"border-red-400\");\n}\n\nconst operations = (type) => {\n    switch (type) {\n        case 'property': return [\n            \"writeproperty\",\n            \"readproperty\",\n            \"observeproperty\",\n            \"unobserveproperty\",\n        ];\n        case 'event': return [\n            \"subscribeevent\",\n            \"unsubscribeevent\",\n        ];\n        case 'action': return [\n            \"invokeaction\"\n        ];\n        case 'thing': return [\n            \"writeallproperties\",\n            \"readallproperties\",\n            \"writemultipleproperties\",\n            \"readmultipleproperties\",\n            \"observeallproperties\",\n            \"unobserveallproperties\"\n        ];\n        default: return [];\n    }\n}\n\nconst operationsSelections = (type) => {\n    return <div className=\"bg-gray-600 p-1 rounded-md\">\n        {operations(type).map((e) => formCheckbox(e))}\n    </div>\n};\n\nconst formCheckbox = (name) => {\n    const id = `form-${name}`;\n\n    return <div key={id} className=\"form-checkbox pl-2\">\n        {\n            name !== \"invokeaction\" ? <input id={id}\n                className=\"form-checkbox-input\"\n                type=\"checkbox\"\n                value={name}\n\n            /> : <input id={id}\n                className=\"form-checkbox-input\"\n                type=\"checkbox\"\n                value={name}\n                readOnly={name === 'invokeaction'}\n                checked={name === 'invokeaction'}\n                />\n        }\n        <label className=\"form-checkbox-label pl-2\" htmlFor={id}>{name}</label>\n    </div>;\n}\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from 'react';\nimport { Info } from 'react-feather';\nimport ReactTooltip from 'react-tooltip';\n\n/**\n * Display an info icon that shows a information text when hovered\n * next to the child.\n *\n * The parameter tooltip a TooltipContent object containing HTML on how\n * the tooltip is rendered and a link that gets called onClick.\n * @param {TooltipContent} tooltip\n * @param {Object} children\n */\nexport const InfoIconWrapper = (props) => {\n    return (\n        <div className=\"flex flex-row items-center\">\n            <div className=\"pr-0.5\">\n                {props.children}\n            </div>\n            <button onClick={() => window.open(props.tooltip.href, \"_blank\")}>\n                <InfoIcon html={props.tooltip.html} />\n            </button>\n            <div className=\"p-1\"></div>\n        </div >\n    );\n}\n\n/**\n * Display an info icon that shows a information text when hovered.\n * \n * The parameter html is a String containing HTML for the tooltips layout.\n * @param {String} html\n */\nexport const InfoIcon = (props) => {\n    return (\n        <>\n            <Info color=\"grey\"\n                size=\"16\"\n                data-html={true}\n                data-type=\"info\"\n                data-tip={props.html}\n                data-background-color=\"#2c2c2e\"\n            />\n            <ReactTooltip html={true} type=\"info\" />\n        </ >\n    );\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\n\nclass TooltipContent {\n    constructor(html, href) {\n        this.html = html;\n        this.href = href;\n    }\n}\n\nexport const getPropertiesTooltipContent = () => {\n    const html = `<h2 class='text-lg'>Web of Things Properties</h2>\n                    <p>A Property is a simple attribute of a device. The value of a Property can be readable.</p>\n                    <p>writable or observable. E.g. a Property for a lamp could indicate if it is on or off.</p>\n                    <br />\n                    <p>Click to get more information about Properties.</p> \n                `\n    const href = \"https://www.w3.org/TR/wot-thing-description/#propertyaffordance\";\n    return new TooltipContent(html, href);\n}\n\nexport const getActionsTooltipContent = () => {\n    const html = `<h2 class='text-lg'>Web of Things Actions</h2>\n                    <p>An Action is some kind of procedure that can be triggered on a device. An Action can</p>\n                    <p>be started or cancelled. E.g. an Action for a lamp could be turning it on or off.</p>\n                    <br />\n                    <p>Click to get more information about Actions.</p>\n                `\n    const href = \"https://www.w3.org/TR/wot-thing-description/#actionaffordance\";\n    return new TooltipContent(html, href);\n}\n\nexport const getEventsTooltipContent = () => {\n    const html = `<h2 class='text-lg'>Web of Things Events</h2>\n                <p>An Event is an asynchronously happening information flow. An Event is observable.</p>\n                <p>E.g. an Event for a lamp could fire if it gets turned on or off.</p>\n                <br />\n                <p>Click to get more information about Events.</p>\n            `\n\n    const href = \"https://www.w3.org/TR/wot-thing-description/#eventaffordance\";\n    return new TooltipContent(html, href);\n}\n\nexport const getFormsTooltipContent = () => {\n    const html = `<h2 class='text-lg'>Web of Things Forms</h2>\n                    <p>A Form contains all information needed to make a request to a device.</p>\n                    <p>It can accompany a Property, Action, Event or a Thing itself.</p>\n                    <br />\n                    <p>Click to get more information about Forms.</p>\n                `\n    const href = \"https://www.w3.org/TR/wot-thing-description/#form\";\n\n    return new TooltipContent(html, href);\n}\n\nexport const tooltipMapper = {\n    \"properties\": getPropertiesTooltipContent(),\n    \"actions\": getActionsTooltipContent(),\n    \"events\": getEventsTooltipContent(),\n    \"forms\": getFormsTooltipContent(),\n};","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext } from \"react\";\nimport \"../../assets/main.css\"\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { Trash2 } from \"react-feather\";\n\nexport default function Form(props) {\n\n    const formChooser = {\n        \"observeproperty\": <ObserveForm type=\"properties\" form={props.form} propName={props.propName} />,\n        \"unobserveproperty\": <UnobserveForm type=\"properties\" form={props.form} propName={props.propName} />,\n        \"observeallproperties\": <ObserveAllForm type=\"forms\" form={props.form} propName={props.propName} />,\n        \"unobserveallproperties\": <UnobserveAllForm type=\"forms\" form={props.form} propName={props.propName} />,\n        \"readproperty\": <ReadForm type=\"properties\" form={props.form} propName={props.propName} />,\n        \"readmultipleproperties\": <ReadMultipleForm type=\"forms\" form={props.form} formIndex={props.propName} />,\n        \"readallproperties\": <ReadAllForm type=\"forms\" form={props.form} formIndex={props.propName} />,\n        \"writeproperty\": <WriteForm type=\"properties\" form={props.form} propName={props.propName} />,\n        \"writemultipleproperties\": <WriteMultipleForm type=\"forms\" form={props.form} formIndex={props.propName} />,\n        \"writeallproperties\": <WriteAllForm type=\"forms\" form={props.form} formIndex={props.propName} />,\n        \"invokeaction\": <InvokeForm type=\"actions\" form={props.form} propName={props.propName} />,\n        \"unsubscribeevent\": <UnobserveForm type=\"events\" form={props.form} propName={props.propName} />,\n    }\n\n    if (formChooser[props.form.op]) {\n        return formChooser[props.form.op];\n    }\n\n    if (props.interactionType === \"action\") {\n        return <InvokeForm type=\"actions\" form={props.form} propName={props.propName} />\n    } else if (props.interactionType === \"event\") {\n        return <ObserveForm type=\"events\" form={props.form} propName={props.propName} />\n    }\n\n    return <UndefinedForm form={props.form} propName={props.propName} />\n}\n\nexport function ObserveForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formOrange rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formOrange\">\n            <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formOrange place-self-center text-center text-xs px-4\">Observe</div>\n            </div>\n            <div className=\"place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formOrange\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function UnobserveForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed\">\n            <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formRed place-self-center text-center text-xs px-4\">Unobserve</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formRed\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function ObserveAllForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formOrange rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formOrange\">\n            <div className=\"flex h-6 w-18 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formOrange place-self-center text-center text-xs px-4\">ObserveAll</div>\n            </div>\n            <div className=\"place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formOrange\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function UnobserveAllForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed\">\n            <div className=\"flex h-6 w-18 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formRed place-self-center text-center text-xs px-4\">UnobserveAll</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formRed\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function ReadForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen\">\n            <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formGreen place-self-center text-center text-xs px-4\">Read</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formGreen\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function ReadMultipleForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen\">\n            <div className=\"flex h-6 w-18 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formGreen place-self-center text-center text-xs px-4\">ReadMultiple</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formGreen\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function ReadAllForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen\">\n            <div className=\"flex h-6 w-18 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formGreen place-self-center text-center text-xs px-4\">ReadAll</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formGreen\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function WriteForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue\">\n            <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formBlue place-self-center text-center text-xs px-4\">Write</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function WriteMultipleForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue\">\n            <div className=\"flex h-6 w-18 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formBlue place-self-center text-center text-xs px-4\">WriteMultiple</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function WriteAllForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue\">\n            <div className=\"flex h-6 w-18 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formBlue place-self-center text-center text-xs px-4\">WriteAll</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\n\nexport function InvokeForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed\">\n            <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"text-formRed place-self-center text-center text-xs px-4\">Invoke</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base text-white overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formRed\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}\n\nexport function UndefinedForm(props) {\n    const context = useContext(ediTDorContext)\n    const deleteForm = (e) => {\n        context.removeForm(e)\n    }\n    return (\n        <div className=\"flex flex-row items-center justify-start h-10 w-full bg-gray-300 rounded-md px-4 mt-2 bg-opacity-75 border-2 border-gray-300\">\n            <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                <div className=\"place-self-center text-center text-xs px-4\">Undefined</div>\n            </div>\n            <div className=\" place-self-center pl-3 text-base overflow-hidden flex-grow\">{props.form.href}</div>\n            <button className=\"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-white\" onClick={() => deleteForm(props)}>\n                <Trash2 size={16} color=\"black\" />\n            </button>\n        </div>\n    );\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from 'react';\nimport { ChevronDown } from 'react-feather';\n\nexport const DialogTextField = (props) => {\n    return <div key={props.id} className=\"py-1\">\n        <label htmlFor={props.id} className=\"text-sm text-gray-400 font-medium pl-2\">{props.label}:</label>\n        <input\n            name={props.id}\n            id={props.id}\n            className=\"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500\"\n            placeholder={props.placeholder}\n            type={props.type ?? \"text\"}\n            autoFocus={props.autoFocus ?? false}\n            onChange={props.onChange ? () => props.onChange() : null}\n        />\n        <span id={`${props.id}-helper-text`} className=\"text-xs text-red-400 pl-2\"></span>\n    </div>;\n}\n\nexport const DialogTextArea = (props) => {\n    return <>\n        <label htmlFor={props.id} className=\"text-sm text-gray-400 font-medium pl-2\">{props.label}:</label>\n        <textarea\n            id={props.id}\n            rows=\"5\"\n            className=\"bg-gray-600\n                sm:text-sm\n                appearance-none \n                border-2 border-gray-600 rounded w-full \n                p-2\n                text-white \n                leading-tight \n                focus:outline-none \n                focus:border-blue-500\"\n            placeholder={props.placeholder}\n        />\n    </>;\n}\n\nexport const DialogDropdown = (props) => {\n    return <>\n        <label htmlFor={props.id} className=\"text-sm text-gray-400 font-medium pl-2\">{props.label}:</label>\n        <div className=\"relative\">\n            <select className=\"block appearance-none w-full bg-gray-600 border-2 border-gray-600 text-white py-3 px-4 pr-8 rounded leading-tight focus:border-blue-500 focus:outline-none\" id={props.id}>\n                {props.options.map((e) => { return <option key={e}>{e}</option> })}\n            </select>\n            <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                <ChevronDown color=\"#cacaca\"></ChevronDown>\n            </div>\n        </div>\n    </>;\n\n}\n\nexport const DialogCheckbox = (props) => {\n    return <div key={props.id} className=\"form-checkbox pl-2\">\n        {\n            props.readOnly ?? true ?\n                <input id={props.id}\n                    className=\"form-checkbox-input\"\n                    type=\"checkbox\"\n                    value={props.label}\n                /> :\n                <input id={props.id}\n                    className=\"form-checkbox-input\"\n                    type=\"checkbox\"\n                    value={props.label}\n                    readOnly={props.readOnly}\n                    checked={true}\n                />\n        }\n        <label className=\"form-checkbox-label pl-2\" htmlFor={props.id}>{props.label}</label>\n    </div>;\n}\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useContext, useEffect, useImperativeHandle } from 'react';\nimport ReactDOM from \"react-dom\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { DialogTextArea, DialogTextField } from './DialogComponents';\nimport { DialogTemplate } from \"./DialogTemplate\";\n\nexport const AddActionDialog = forwardRef((_, ref) => {\n    const context = useContext(ediTDorContext);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    const type = \"action\";\n    const key = \"actions\";\n    const name = type && type[0].toUpperCase() + type.slice(1);\n\n    useEffect(() => {\n    }, [display, context]);\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    const children = <>\n        <DialogTextField\n            id={`${type}-title`}\n            label=\"Title\"\n            placeholder={`${name} Title`}\n            autoFocus={true}\n            onChange={() => clearErrorMessage()}\n        />\n        <DialogTextArea\n            id={`${type}-description`}\n            label=\"Description\"\n            placeholder={`A short description about the new ${name}...`}\n        />\n    </>;\n\n    const onAddAction = () => {\n        let action = {};\n        action.title = document.getElementById(`${type}-title`).value;\n\n        const description = document.getElementById(`${type}-description`).value;\n        if (description !== \"\") {\n            action.description = description;\n        }\n        action.forms = [];\n\n        let td = JSON.parse(context.offlineTD);\n        if (td[key] && td[key][action.title]) {\n            showErrorMessage(`An ${name} with this title already exists...`);\n        } else {\n            addActionToTd(action);\n            close();\n        }\n    }\n\n    const addActionToTd = (action) => {\n        let td = JSON.parse(context.offlineTD);\n\n        if (!td[key]) {\n            td[key] = {};\n        }\n\n        td[key][action.title] = action;\n        context.updateOfflineTD(JSON.stringify(td, null, 2))\n        return;\n    }\n\n    const showErrorMessage = (msg) => {\n        document.getElementById(`${type}-title-helper-text`).textContent = msg;\n        document.getElementById(`${type}-title`).classList.remove(\"border-gray-600\");\n        document.getElementById(`${type}-title`).classList.add(\"border-red-400\");\n    }\n\n    const clearErrorMessage = () => {\n        document.getElementById(`${type}-title-helper-text`).textContent = \"\";\n        document.getElementById(`${type}-title`).classList.add(\"border-gray-600\");\n        document.getElementById(`${type}-title`).classList.remove(\"border-red-400\");\n    }\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={() => {\n                    onAddAction();\n                }}\n                submitText={`Add ${name}`}\n                children={children}\n                title={`Add New ${name}`}\n                description={`Tell us a little something about the ${name} you want to add.`}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useContext, useEffect, useImperativeHandle } from 'react';\nimport ReactDOM from \"react-dom\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { DialogTextArea, DialogTextField } from './DialogComponents';\nimport { DialogTemplate } from \"./DialogTemplate\";\n\nexport const AddEventDialog = forwardRef((_, ref) => {\n    const context = useContext(ediTDorContext);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    const type = \"event\";\n    const key = \"events\";\n    const name = type && type[0].toUpperCase() + type.slice(1);\n\n    useEffect(() => {\n    }, [display, context]);\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    const children = <>\n        <DialogTextField\n            id={`${type}-title`}\n            label=\"Title\"\n            placeholder={`${name} Title`}\n            autoFocus={true}\n            onChange={() => clearErrorMessage()}\n        />\n        <DialogTextArea\n            id={`${type}-description`}\n            label=\"Description\"\n            placeholder={`A short description about the new ${name}...`}\n        />\n    </>;\n\n    const onAddEvent = () => {\n        let event = {};\n        event.title = document.getElementById(`${type}-title`).value;\n\n        const description = document.getElementById(`${type}-description`).value;\n        if (description !== \"\") {\n            event.description = description;\n        }\n        event.forms = [];\n\n        let td = JSON.parse(context.offlineTD);\n        if (td[key] && td[key][event.title]) {\n            showErrorMessage(`An ${name} with this title already exists...`);\n        } else {\n            addEventToTd(event);\n            close();\n        }\n    }\n\n    const addEventToTd = (event) => {\n        let td = JSON.parse(context.offlineTD);\n\n        if (!td[key]) {\n            td[key] = {};\n        }\n\n        td[key][event.title] = event;\n        context.updateOfflineTD(JSON.stringify(td, null, 2))\n        return;\n    }\n\n    const showErrorMessage = (msg) => {\n        document.getElementById(`${type}-title-helper-text`).textContent = msg;\n        document.getElementById(`${type}-title`).classList.remove(\"border-gray-600\");\n        document.getElementById(`${type}-title`).classList.add(\"border-red-400\");\n    }\n\n    const clearErrorMessage = () => {\n        document.getElementById(`${type}-title-helper-text`).textContent = \"\";\n        document.getElementById(`${type}-title`).classList.add(\"border-gray-600\");\n        document.getElementById(`${type}-title`).classList.remove(\"border-red-400\");\n    }\n\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={() => {\n                    onAddEvent();\n                }}\n                submitText={`Add ${name}`}\n                children={children}\n                title={`Add New ${name}`}\n                description={`Tell us a little something about the ${name} you want to add.`}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useContext, useEffect, useImperativeHandle } from 'react';\nimport ReactDOM from \"react-dom\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { DialogCheckbox, DialogDropdown, DialogTextArea, DialogTextField } from './DialogComponents';\nimport { DialogTemplate } from \"./DialogTemplate\";\n\nconst NO_TYPE = \"undefined\";\n\nexport const AddPropertyDialog = forwardRef((_, ref) => {\n    const context = useContext(ediTDorContext);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    const type = \"property\";\n    const key = \"properties\";\n    const name = type && type[0].toUpperCase() + type.slice(1);\n\n    useEffect(() => {\n    }, [display, context]);\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    const children = <>\n        <DialogTextField\n            id={`${type}-title`}\n            label=\"Title\"\n            placeholder={`${name} Title`}\n            autoFocus={true}\n            onChange={() => clearErrorMessage()}\n        />\n        <DialogTextArea\n            id={`${type}-description`}\n            label=\"Description\"\n            placeholder={`A short description about the new ${name}...`}\n        />\n        <DialogDropdown\n            id={`${type}-type`}\n            label=\"Type\"\n            options={[NO_TYPE, \"number\", \"integer\", \"boolean\", \"string\", \"object\", \"array\",]}\n        />\n        <div className=\"h-2\"></div>\n        <label className=\"text-sm text-gray-400 font-medium pl-3\">Additional:</label>\n        <div id=\"additional\" className=\"bg-gray-600 p-1 rounded-md\">\n            <DialogCheckbox\n                id={`${type}-readOnly`}\n                label=\"Read Only\"\n            />\n            <DialogCheckbox\n                id={`${type}-observable`}\n                label=\"Observable\"\n            />\n        </div>\n    </>;\n\n    const onAddProperty = () => {\n        let property = {};\n        property.title = document.getElementById(`${type}-title`).value;\n        property.observable = document.getElementById(`${type}-observable`).checked;\n        property.readOnly = document.getElementById(`${type}-readOnly`).checked;\n\n        const description = document.getElementById(`${type}-description`).value;\n        if (description !== \"\") {\n            property.description = description;\n        }\n\n        const dataType = document.getElementById(`${type}-type`).value;\n        if (dataType !== NO_TYPE) {\n            property.type = dataType;\n        }\n        property.forms = [];\n\n        let td = JSON.parse(context.offlineTD);\n        if (td[key] && td[key][property.title]) {\n            showErrorMessage(`A ${name} with this title already exists...`);\n        } else {\n            addPropertyToTd(property);\n            close();\n        }\n    }\n\n    const addPropertyToTd = (property) => {\n        let td = JSON.parse(context.offlineTD);\n\n        if (!td[key]) {\n            td[key] = {};\n        }\n\n        td[key][property.title] = property;\n        context.updateOfflineTD(JSON.stringify(td, null, 2))\n        return;\n    }\n\n    const showErrorMessage = (msg) => {\n        document.getElementById(`${type}-title-helper-text`).textContent = msg;\n        document.getElementById(`${type}-title`).classList.remove(\"border-gray-600\");\n        document.getElementById(`${type}-title`).classList.add(\"border-red-400\");\n    }\n\n    const clearErrorMessage = () => {\n        document.getElementById(`${type}-title-helper-text`).textContent = \"\";\n        document.getElementById(`${type}-title`).classList.add(\"border-gray-600\");\n        document.getElementById(`${type}-title`).classList.remove(\"border-red-400\");\n    }\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={() => {\n                    onAddProperty();\n                }}\n                submitText={`Add ${name}`}\n                children={children}\n                title={`Add New ${name}`}\n                description={`Tell us a little something about the ${name} you want to add.`}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext } from \"react\";\nimport { PlusCircle, Trash2 } from \"react-feather\";\nimport \"../../assets/main.css\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { buildAttributeListObject, separateForms } from \"../../util.js\";\nimport { AddFormDialog } from \"../Dialogs/AddFormDialog\";\nimport { InfoIconWrapper } from \"../InfoIcon/InfoIcon\";\nimport { getFormsTooltipContent } from \"../InfoIcon/InfoTooltips\";\nimport Form from \"./Form\";\n\nconst alreadyRenderedKeys = [\"title\", \"forms\", \"description\"];\n\nexport default function Action(props) {\n    const context = useContext(ediTDorContext);\n\n    const addFormDialog = React.useRef();\n    const openAddFormDialog = () => { addFormDialog.current.openModal() }\n\n    if ((Object.keys(props.action).length === 0 && props.action.constructor !== Object)) {\n        return <div className=\"text-3xl text-white\">Action could not be rendered because mandatory fields are missing.</div>\n    }\n\n    const action = props.action;\n    const forms = separateForms(props.action.forms);\n    const attributeListObject = buildAttributeListObject({ name: props.actionName }, props.action, alreadyRenderedKeys);\n    const attributes = Object.keys(attributeListObject).map(x => {\n        return <li key={x}>{x} : {JSON.stringify(attributeListObject[x])}</li>\n    });\n\n    const onDeleteActionClicked = () => {\n        context.removeOneOfAKindReducer('actions', props.actionName)\n    }\n\n    return (\n        <details>\n            <summary className=\"text-xl text-gray-400 flex flex-row justify-start items-center cursor-pointer p-0.5\">\n                <div className=\"flex-grow\">{action.title ?? props.actionName}</div>\n                <button className=\"text-base w-6 h-6 p-1 m-1 rounded-full bg-gray-400\" onClick={onDeleteActionClicked}>\n                    <Trash2 size={16} color=\"black\" />\n                </button>\n            </summary>\n            <div className=\"mb-4\">\n                <div className=\"text-lg text-gray-400 pb-2\">{action.description}</div>\n                <ul className=\"text-base text-gray-300 list-disc pl-8\">{attributes}</ul>\n                <div className=\"flex flex-row items-center \">\n                    <div className=\"flex flex-grow\">\n                        <InfoIconWrapper className=\" flex-grow\" tooltip={getFormsTooltipContent()}>\n                            <h4 className=\"text-lg text-gray-400 pr-1 text-bold\">Forms</h4>\n                        </InfoIconWrapper>\n                    </div>\n                    <button onClick={openAddFormDialog}>\n                        <PlusCircle color=\"#cacaca\" size=\"18\" />\n                    </button>\n                    <AddFormDialog type=\"action\"\n                        interaction={action}\n                        interactionName={props.actionName}\n                        ref={addFormDialog}\n                    />\n                </div>\n                {forms.map((form, i) => (\n                    <Form key={i} form={form} propName={props.actionName} interactionType={\"action\"}></Form>\n                ))}\n            </div>\n        </details>\n    )\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext } from \"react\";\nimport { PlusCircle, Trash2 } from \"react-feather\";\nimport \"../../assets/main.css\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { buildAttributeListObject, separateForms } from \"../../util.js\";\nimport { AddFormDialog } from \"../Dialogs/AddFormDialog\";\nimport { InfoIconWrapper } from \"../InfoIcon/InfoIcon\";\nimport { getFormsTooltipContent } from \"../InfoIcon/InfoTooltips\";\nimport Form from \"./Form\";\n\nconst alreadyRenderedKeys = [\"title\", \"forms\", \"description\"];\n\nexport default function Event(props) {\n    const context = useContext(ediTDorContext);\n\n    const addFormDialog = React.useRef();\n    const openAddFormDialog = () => { addFormDialog.current.openModal() }\n\n    if ((Object.keys(props.event).length === 0 && props.event.constructor !== Object)) {\n        return <div className=\"text-3xl text-white\">Event could not be rendered because mandatory fields are missing.</div>\n    }\n\n    const event = props.event;\n    const forms = separateForms(props.event.forms);\n    const attributeListObject = buildAttributeListObject({ name: props.eventName }, props.event, alreadyRenderedKeys);\n    const attributes = Object.keys(attributeListObject).map(x => {\n        return <li key={x}>{x} : {JSON.stringify(attributeListObject[x])}</li>\n    });\n\n    const onDeleteEventClicked = () => {\n        context.removeOneOfAKindReducer('events', props.eventName)\n    }\n\n    return (\n        <details>\n            <summary className=\"text-xl text-gray-400 flex flex-row justify-start items-center cursor-pointer p-0.5\">\n                <div className=\"flex-grow\">{event.title ?? props.eventName}</div>\n                <button className=\"text-base w-6 h-6 p-1 m-1 rounded-full bg-gray-400\" onClick={onDeleteEventClicked}>\n                    <Trash2 size={16} color=\"black\" />\n                </button>\n            </summary>\n            <div className=\"mb-4\">\n                <div className=\"text-lg text-gray-400 pb-2\">{event.description}</div>\n                <ul className=\"text-base text-gray-300 list-disc pl-8\">{attributes}</ul>\n                <div className=\"flex flex-row items-center \">\n                    <div className=\"flex flex-grow\">\n                        <InfoIconWrapper className=\" flex-grow\" tooltip={getFormsTooltipContent()}>\n                            <h4 className=\"text-lg text-gray-400 pr-1 text-bold\">Forms</h4>\n                        </InfoIconWrapper>\n                    </div>\n                    <button onClick={openAddFormDialog}>\n                        <PlusCircle color=\"#cacaca\" size=\"18\" />\n                    </button>\n                    <AddFormDialog type=\"event\"\n                        interaction={event}\n                        interactionName={props.eventName}\n                        ref={addFormDialog}\n                    />\n                </div>\n                {forms.map((form, i) => (\n                    <Form key={i} form={form} propName={props.eventName} interactionType={\"event\"}></Form>\n                ))}\n            </div>\n        </details>\n    )\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext } from \"react\";\nimport { PlusCircle, Trash2 } from \"react-feather\";\nimport \"../../assets/main.css\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { buildAttributeListObject, separateForms } from \"../../util.js\";\nimport { AddFormDialog } from \"../Dialogs/AddFormDialog\";\nimport { InfoIconWrapper } from \"../InfoIcon/InfoIcon\";\nimport { getFormsTooltipContent } from \"../InfoIcon/InfoTooltips\";\nimport Form from \"./Form\";\n\nconst alreadyRenderedKeys = [\"title\", \"forms\", \"description\"];\n\nexport default function Property(props) {\n    const context = useContext(ediTDorContext);\n\n    const addFormDialog = React.useRef()\n    const openAddFormDialog = () => { addFormDialog.current.openModal() }\n\n    if ((Object.keys(props.prop).length === 0 && props.prop.constructor !== Object)) {\n        return <div className=\"text-3xl text-white\">Property could not be rendered because mandatory fields are missing.</div>\n    }\n\n    const property = props.prop;\n    const forms = separateForms(props.prop.forms);\n\n    const attributeListObject = buildAttributeListObject({ name: props.propName }, props.prop, alreadyRenderedKeys);\n    const attributes = Object.keys(attributeListObject).map(x => {\n        return <li key={x}>{x} : {JSON.stringify(attributeListObject[x])}</li>\n    });\n\n    const onDeletePropertyClicked = () => {\n        context.removeOneOfAKindReducer('properties', props.propName)\n    }\n\n    return (\n        <details>\n            <summary className=\"text-xl text-gray-400 flex flex-row w-full justify-start items-center cursor-pointer p-0.5\">\n                <h3 className=\"flex-grow\">{property.title ?? props.propName}</h3>\n                <button className=\"text-base w-6 h-6 p-1 m-1 rounded-full bg-gray-400\" onClick={onDeletePropertyClicked}>\n                    <Trash2 size={16} color=\"black\" />\n                </button>\n            </summary>\n            <div className=\"mb-4\">\n                <div className=\"text-lg text-gray-400 pb-2\">{property.description}</div>\n                <ul className=\"list-disc text-base text-gray-300 pl-8\">{attributes}</ul>\n                <div className=\"flex justify-start items-center pt-2\">\n                    <div className=\"flex flex-grow\">\n                        <InfoIconWrapper className=\" flex-grow\" tooltip={getFormsTooltipContent()}>\n                            <h4 className=\"text-lg text-gray-400 pr-1 text-bold\">Forms</h4>\n                        </InfoIconWrapper>\n                    </div>\n                    <button onClick={openAddFormDialog}>\n                        <PlusCircle color=\"#cacaca\" size=\"18\" />\n                    </button>\n                    <AddFormDialog type=\"property\"\n                        interaction={property}\n                        interactionName={props.propName}\n                        ref={addFormDialog}\n                    />\n                </div>\n                {forms.map((form, i) => (\n                    <Form key={i} propName={props.propName} form={form} interactionType={\"property\"} className=\"last:pb-4\"></Form>\n                ))}\n            </div>\n        </details >\n    )\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from \"react\";\nimport { Search } from \"react-feather\";\n\nexport const SearchBar = (props) => {\n    return (\n        <div className=\"relative text-gray-600\">\n            <input type=\"search\"\n                autoComplete=\"on\"\n                className=\"caret-gray bg-gray-600 text-white px-5 pr-10 place-self-center rounded-lg text-sm focus:outline-none h-9\"\n                onKeyUp={props.onKeyUp}\n                placeholder={props.placeholder}\n                aria-label={props.ariaLabel}\n            />\n            <div disabled type=\"submit\" className=\"cursor-default absolute right-0 top-0 mt-1 mr-4\">\n                <Search color=\"#2c2c2e\"></Search>\n            </div>\n        </div>\n    );\n}","import React, { useContext, useState } from 'react';\nimport ediTDorContext from '../../context/ediTDorContext';\nimport { AddActionDialog } from '../Dialogs/AddActionDialog';\nimport { AddEventDialog } from '../Dialogs/AddEventDialog';\nimport { AddPropertyDialog } from '../Dialogs/AddPropertyDialog';\nimport { InfoIconWrapper } from '../InfoIcon/InfoIcon';\nimport { tooltipMapper } from '../InfoIcon/InfoTooltips';\nimport Action from './Action';\nimport Event from './Event';\nimport Property from './Property';\nimport { SearchBar } from './SearchBar';\n\nconst SORT_ASC = \"asc\";\nconst SORT_DESC = \"desc\";\n\nlet td = {};\nlet oldTd = {};\n\n/**\n * Renders a section for an interaction (Property, Action, Event) with a \n * search bar, a sorting icon and a button to add a new interaction.\n * \n * The parameter interaction can be one of \"Properties\", \"Actions\" or \"Events\".\n * @param {String} interaction\n */\nexport const InteractionSection = (props) => {\n    const [filter, setFilter] = useState(\"\");\n    const [sortOrder, setSortOrder] = useState(SORT_ASC);\n\n    const interaction = props.interaction.toLowerCase();\n    const context = useContext(ediTDorContext);\n\n    try {\n        oldTd = td;\n        const parsedTd = JSON.parse(context.offlineTD);\n        td = parsedTd;\n    } catch (e) {\n        td = oldTd;\n    }\n\n    const updateFilter = (event) => setFilter(event.target.value);\n\n    /**\n    * Returns an Object containing all interactions with keys \n    * matching to the filter.\n    */\n    const applyFilter = () => {\n        if (!td[interaction]) {\n            return;\n        }\n\n        const filtered = {};\n        Object.keys(td[interaction]).filter(e => {\n            if (e.toLowerCase().indexOf(filter.toLowerCase()) > -1) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }).forEach((key) => {\n            filtered[key] = td[interaction][key];\n        });\n\n        return filtered;\n    }\n\n    const sortKeysInObject = (kind) => {\n        if (!td[kind]) {\n            return;\n        }\n\n        const ordered = {};\n        const toSort = Object.keys(td[kind]).map(x => {\n            return { key: x, title: td[kind][x].title }\n        })\n        if (sortOrder === SORT_ASC) {\n            toSort.sort((a, b) => {\n                const nameA = a.title ? a.title : a.key;\n                const nameB = b.title ? b.title : b.key;\n                return nameA.localeCompare(nameB)\n            }).forEach(function (sortedObject) {\n                ordered[sortedObject.key] = td[kind][sortedObject.key];\n            });\n            setSortOrder(SORT_DESC);\n        } else {\n            toSort.sort((a, b) => {\n                const nameA = a.title ? a.title : a.key;\n                const nameB = b.title ? b.title : b.key;\n                return nameA.localeCompare(nameB)\n            }).reverse().forEach(function (sortedObject) {\n                ordered[sortedObject.key] = td[kind][sortedObject.key];\n            });\n            setSortOrder(SORT_ASC);\n        }\n        td[kind] = ordered\n        context.updateOfflineTD(JSON.stringify(td, null, 2))\n    }\n\n    const sortedIcon = () => {\n        if (sortOrder === SORT_ASC) {\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"#ffffff\" stroke=\"#ffffff\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <path d=\"M11 5h10M11 9h7M11 13h4M3 17l3 3 3-3M6 18V4\" />\n            </svg>\n        }\n\n        return (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"#ffffff\" stroke=\"#ffffff\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n            <path d=\"M11 5h4M11 9h7M11 13h10M3 17l3 3 3-3M6 18V4\" />\n        </svg>)\n    }\n\n    const buildChildren = () => {\n        const filteredInteractions = applyFilter();\n\n        if (td.properties && interaction === \"properties\") {\n            return Object.keys(filteredInteractions).map((key, index) => {\n                return (<Property prop={filteredInteractions[key]} propName={key} key={index} />);\n            });\n        }\n        if (td.actions && interaction === \"actions\") {\n            return Object.keys(filteredInteractions).map((key, index) => {\n                return (<Action action={filteredInteractions[key]} actionName={key} key={index} />);\n            });\n        }\n        if (td.events && interaction === \"events\") {\n            return Object.keys(filteredInteractions).map((key, index) => {\n                return (<Event event={filteredInteractions[key]} eventName={key} key={index} />);\n            });\n        }\n    }\n\n    const createPropertyDialog = React.useRef();\n    const openCreatePropertyDialog = () => { createPropertyDialog.current.openModal() }\n\n    let addInteractionDialog;\n    switch (interaction) {\n        case 'properties': addInteractionDialog = <AddPropertyDialog ref={createPropertyDialog} />; break;\n        case 'actions': addInteractionDialog = <AddActionDialog ref={createPropertyDialog} />; break;\n        case 'events': addInteractionDialog = <AddEventDialog ref={createPropertyDialog} />; break;\n        default:\n    }\n\n    return (\n        <>\n            <div className=\"flex justify-start items-end pt-8 pb-4\">\n                <div className=\"flex flex-grow\">\n                    <InfoIconWrapper tooltip={tooltipMapper[interaction]}>\n                        <h2 className=\"text-2xl text-white pr-1 flex-grow\">{props.interaction}</h2>\n                    </InfoIconWrapper>\n                </div>\n                <SearchBar\n                    onKeyUp={(e) => updateFilter(e)}\n                    placeholder={`Search ${props.interaction}`}\n                    ariaLabel={`Search through all ${props.interaction}`}\n                />\n                <div className=\"w-2\"></div>\n                <button className=\"text-white bg-blue-500 cursor-pointer rounded-md p-2 h-9\" onClick={() => sortKeysInObject(interaction)}>\n                    {sortedIcon()}\n                </button>\n                <div className=\"w-2\"></div>\n                <button className=\"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2 h-9\" onClick={openCreatePropertyDialog}>Add</button>\n                {addInteractionDialog}\n            </div>\n            {buildChildren() && <div className=\"rounded-lg bg-gray-600 px-6 pt-4 pb-4\">{buildChildren()}</div>}\n        </>\n    );\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useCallback, useState } from 'react';\nimport \"../../assets/main.css\"\nimport { ChevronRight, ChevronDown } from 'react-feather';\n\nfunction isObject(val) {\n    if (val === null) { return false; }\n    return ((typeof val === 'function') || (typeof val === 'object'));\n}\n\nexport const RenderedObject = (map) => {\n    const [showChildren, setShowChildren] = useState(new Array(Object.entries(map).length));\n    const handleClick = useCallback((i) => {\n        let temp = showChildren;\n        let x = showChildren[i];\n        temp[i] = x === null ? true : !x;\n        setShowChildren([...temp]);\n    }, [showChildren, setShowChildren])\n\n    return (\n        <>\n            {Object.entries(map).map(([k, v], i) => {\n                if (isObject(v)) {\n                    let indicator = (<button className=\"flex align-top\" onClick={() => handleClick(i)}>\n                        <div className=\"flex text-white font-bold bg-gray-600 py-1 px-2 rounded-md align-middle\">\n                            <h4>{k}</h4>\n                            {showChildren[i] === true ? <ChevronDown className=\"pl-1\" /> : <ChevronRight className=\"pl-1\" />}\n                        </div>\n                    </button>);\n\n                    let children = (<div className=\"flex\">\n                        <div className=\"flex w-1 rounded-lg bg-gray-400 ml-2 my-1\" />\n                        <div className=\"pl-8 mt-1\">\n                            {showChildren[i] === true && (Object.entries(v) ?? []).map(([k1, v1], i1) => {\n                                let m1 = {};\n                                m1[k1] = v1;\n                                return <RenderedObject {...m1} key={i1} />\n                            })}\n                        </div>\n                    </div>);\n\n                    return (\n                        <div className=\"mb-1\" key={i}>\n                            {indicator}\n                            {showChildren[i] === true && children}\n                        </div>\n                    )\n                }\n\n                return (\n                    <div className=\"flex mb-1\" key={i}>\n                        <h4 className=\"text-white font-bold bg-gray-600 py-1 px-2 rounded-md\">{k}</h4>\n                        <div className=\"text-gray-400 px-2 py-1\">{`${v}`}</div>\n                    </div>\n                )\n            })}\n        </ >\n    );\n}\n\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext } from 'react';\nimport '../../assets/main.css';\nimport ediTDorContext from '../../context/ediTDorContext';\nimport { buildAttributeListObject, separateForms } from '../../util';\nimport { AddFormDialog } from \"../Dialogs/AddFormDialog\";\nimport { InfoIconWrapper } from '../InfoIcon/InfoIcon';\nimport { getFormsTooltipContent } from '../InfoIcon/InfoTooltips';\nimport Form from './Form';\nimport { InteractionSection } from './InteractionSection';\nimport { RenderedObject } from './RenderedObject';\nlet tdJSON = {};\nlet oldtdJSON = {};\nlet error = \"\";\n\nexport default function TDViewer() {\n    const context = useContext(ediTDorContext);\n\n    const addFormDialog = React.useRef();\n    const openAddFormDialog = () => { addFormDialog.current.openModal() }\n\n    try {\n        oldtdJSON = tdJSON;\n        tdJSON = JSON.parse(context.offlineTD);\n        error = '';\n    } catch (e) {\n        error = e.message;\n        tdJSON = oldtdJSON;\n    }\n\n    if (!Object.keys(tdJSON).length) {\n        return (\n            <div className=\"flex h-full w-full bg-gray-500 justify-center align-center text-center \">\n                <div className=\"text-4xl text-white place-self-center\">Start writing a new TD by clicking \"New TD\"</div>\n            </div>\n        )\n    }\n\n    let forms;\n    let metaData;\n\n    if (tdJSON) {\n        if (tdJSON.forms) {\n            const formsSeparated = separateForms(tdJSON.forms);\n            forms = formsSeparated.map((key, index) => {\n                return (<Form form={key} propName={index} key={index} />);\n            });\n        }\n        metaData = tdJSON;\n\n        const alreadyRenderedKeys = [\"id\", \"properties\", \"actions\", \"events\", \"forms\", \"description\", \"title\",];\n        const attributeListObject = buildAttributeListObject(tdJSON.id ? { id: tdJSON.id } : {}, tdJSON, alreadyRenderedKeys);\n\n        return (\n            <div className=\"h-full w-full bg-gray-500 p-8 overflow-auto\">\n                {(error.length > 0 && (\n                    <div className=\"flex h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed\">\n                        <div className=\"flex h-6 w-16 bg-white rounded-md place-self-center justify-center\">\n                            <div className=\"text-formRed place-self-center text-center text-xs px-4\">Error</div>\n                        </div>\n                        <div className=\" place-self-center pl-3 text-base text-white overflow-hidden\">{error}</div>\n                    </div>))}\n                {(metaData !== undefined && Object.keys(metaData).length > 0) && (\n                    <div>\n                        <div className=\"text-3xl text-white\">{metaData.title}</div>\n                        <RenderedObject {...attributeListObject}></RenderedObject>\n                        {\n                            metaData.description ? <div className=\"text-xl text-white pt-4\">{metaData.description}</div> : <></>\n                        }\n                    </div>)\n                }\n                <details className=\"pt-8\">\n                    <summary className=\"flex justify-start items-center cursor-pointer\">\n                        <div className=\"flex flex-grow\">\n                            <InfoIconWrapper tooltip={getFormsTooltipContent()}>\n                                <h2 className=\"text-2xl text-white p-1 flex-grow\">Forms</h2>\n                            </InfoIconWrapper>\n                        </div>\n                        <button className=\"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2\" onClick={openAddFormDialog}>Add Top Level Form</button>\n                        <AddFormDialog type=\"thing\"\n                            interaction={tdJSON}\n                            ref={addFormDialog}\n                        />\n                    </summary>\n                    {forms && <div className=\"pt-4\"><div className=\"rounded-lg bg-gray-600 px-6 pt-4 pb-4\">{forms}</div></div>}\n                </details>\n\n                <InteractionSection interaction=\"Properties\" ></InteractionSection>\n                <InteractionSection interaction=\"Actions\" ></InteractionSection>\n                <InteractionSection interaction=\"Events\" ></InteractionSection>\n            </div >\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n *\n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n *\n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext, useState, useRef } from \"react\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\n\nconst mapping = require(\"../../assets/mapping.json\");\n\nconst tdSchema =\n  \"https://raw.githubusercontent.com/thingweb/thingweb-playground/%40thing-description-playground/web%401.0.0/packages/playground-core/td-schema.json\";\nconst tmSchema =\n  \"https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/tm-json-schema-validation.json\";\n\n//List of all Options can be found here: https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ieditorconstructionoptions.html\nconst editorOptions = {\n  selectOnLineNumbers: true,\n  automaticLayout: true,\n  lineDecorationsWidth: 20,\n};\n\nconst JSONEditorComponent = (props) => {\n  const context = useContext(ediTDorContext);\n  const [schemas] = useState([]);\n  const [proxy, setProxy] = useState(undefined);\n  const editorInstance = useRef(null);\n\n  const editorWillMount = async (monaco) => {\n    monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\n      validate: true,\n      enableSchemaRequest: true,\n      schemas: [],\n    });\n\n    if (!(\"Proxy\" in window)) {\n      console.warn(\"Your browser doesn't support Proxies.\");\n      return;\n    }\n\n    let proxy = new Proxy(schemas, {\n      set: function (target, property, value, _) {\n        target[property] = value;\n\n        let jsonSchemaObjects = [tdSchema];\n        for (let i = 0; i < target.length; i++) {\n          jsonSchemaObjects.push({\n            fileMatch: [\"*/*\"],\n            uri: target[i],\n          });\n        }\n\n        monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\n          validate: true,\n          enableSchemaRequest: true,\n          schemas: jsonSchemaObjects,\n        });\n\n        return true;\n      },\n    });\n    setProxy(proxy);\n  };\n\n  const editorDidMount = (editor, monaco) => {\n    editor.onDidChangeModelDecorations(() => {\n      const model = editor.getModel();\n      if (model === null || model.getModeId() !== \"json\") return;\n    });\n  };\n\n  const addSchema = (val) => {\n    if (proxy.includes(val)) {\n      return;\n    }\n    proxy.push(val);\n  };\n\n  const removeSchema = (val) => {\n    const index = proxy.indexOf(val);\n    if (index === -1) {\n      return;\n    }\n    proxy.splice(index, 1);\n  };\n\n  const emptySchemas = () => {\n    proxy.splice(0, this.state.proxy.length);\n  };\n\n  const fetchSchema = async (target) => {\n    if (proxy.includes(target)) {\n      return;\n    }\n\n    try {\n      const url = new URL(target);\n      const res = await fetch(url);\n\n      const schema = await res.json();\n      return schema;\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const onChange = async (editorText, _) => {\n    try {\n      const json = JSON.parse(editorText);\n      if (!(\"@context\" in json)) {\n        emptySchemas();\n        return;\n      }\n      //Initialize TD-Schema\n      if (context.isThingModel === undefined) {\n        context.updateIsThingModel(false);\n        const schema = await fetchSchema(tdSchema);\n        if (schema) {\n          addSchema(tdSchema);\n        }\n      }\n\n      const atContext = json[\"@context\"];\n      const atType = json[\"@type\"];\n      if (atType.indexOf(\"ThingModel\") > -1) {\n        if (!context.isThingModel) {\n          context.updateIsThingModel(true);\n          const schema = await fetchSchema(tmSchema);\n          if (schema) {\n            addSchema(tmSchema);\n          }\n        }\n      } else if (context.isThingModel) {\n        if (\n          JSON.stringify(atContext).indexOf(\n            \"https://www.w3.org/2019/wot/td/v1\"\n          ) > -1\n        ) {\n          context.updateIsThingModel(false);\n          const schema = await fetchSchema(tdSchema);\n          if (schema) {\n            addSchema(tdSchema);\n          }\n        }\n      }\n\n      // handle if @context is a string\n      if (typeof atContext === \"string\") {\n        if (mapping[atContext] !== undefined && !proxy.includes(mapping[atContext])) {\n          const schema = await fetchSchema(atContext);\n          if (schema) {\n            addSchema(atContext);\n          }\n          return;\n        }\n      }\n\n      // handle if @context is an array\n      if (Array.isArray(atContext)) {\n        for (let i = 0; i < atContext.length; i++) {\n          if (typeof atContext[i] === \"string\") {\n            if (mapping[atContext] !== undefined && !proxy.includes(mapping[atContext])) {\n              console.log(\"found schema for\", atContext);\n              const schema = await fetchSchema(atContext[i]);\n              if (schema) {\n                addSchema(atContext[i]);\n              }\n            }\n          }\n          if (typeof atContext[i] === \"object\") {\n            Object.keys(atContext[i]).forEach(async (contextKey) => {\n              if (mapping[atContext[i][contextKey]] !== undefined && !proxy.includes(mapping[atContext])) {\n                const schema = await fetchSchema(mapping[atContext[i][contextKey]]);\n                if (schema) {\n                  addSchema(mapping[atContext[i][contextKey]]);\n                }\n              }\n            });\n          }\n        }\n      }\n      // remove deleted schemas\n      if (Array.isArray(atContext)) {\n        for (let i = 0; i < proxy.length; i++) {\n          const x = Object.keys(mapping).find(\n            (key) => mapping[key] === proxy[i]\n          );\n          if (!atContext.includes(x)) {\n            removeSchema(proxy[i]);\n          }\n        }\n      }\n    } catch (e) {\n    } finally {\n      context.updateOfflineTD(editorText, \"Editor\");\n    }\n  };\n\n  return (\n    <div className=\"w-full h-full\">\n      <MonacoEditor\n        options={editorOptions}\n        theme={\"vs-\" + context.theme}\n        language=\"json\"\n        ref={editorInstance}\n        value={context.offlineTD}\n        editorWillMount={editorWillMount}\n        editorDidMount={editorDidMount}\n        onChange={async (editorText) => {\n          await onChange(editorText);\n        }}\n      />\n    </div>\n  );\n};\n\nexport default JSONEditorComponent;\n","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from 'react';\n\nexport default function Button(props) {\n    return (\n        <button\n            onClick={props.onClick}\n            className=\"\n                flex\n                bg-blue-400                 \n                hover:bg-blue-300 \n                text-white \n                font-bold \n                py-2 px-5 \n                rounded \n                h-12\n                text-center \n                cursor-pointer\n                justify-center\n            \">\n            <div className=\"place-self-center\">\n                {props.children}\n            </div>\n        </button>\n    );\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useContext, useEffect, useImperativeHandle } from 'react';\nimport ReactDOM from \"react-dom\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { DialogTemplate } from \"./DialogTemplate\";\n\nexport const ShareDialog = forwardRef((props, ref) => {\n    const context = useContext(ediTDorContext);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    useEffect(() => {\n        if (display === true) {\n            copyLinkToClipboard(createPermalink(context.offlineTD));\n            focusPermalinkField()\n        }\n    }, [display, context]);\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    const urlField = createPermalinkField(context.offlineTD);\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={close}\n                submitText={\"Share\"}\n                children={urlField}\n                title={\"Share This TD\"}\n                description={\"A link to this TD was copied to your clipboard.\"}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\nconst createPermalink = (td) => {\n    let parsedTD = {};\n    try {\n        parsedTD = JSON.parse(td);\n    } catch (_) { }\n\n    return `${window.location.href}?td=${encodeURIComponent(\n        JSON.stringify(parsedTD)\n    )}`;\n}\n\nconst createPermalinkField = (td) => {\n    return (<input\n        type=\"text\"\n        name=\"share-td-field\"\n        id=\"share-td-field\"\n        className=\"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500\"\n        defaultValue={createPermalink(td)}\n    />);\n};\n\nconst copyLinkToClipboard = (link) => {\n    if (document.hasFocus()) {\n        navigator.clipboard.writeText(link).then(\n            function () {\n                console.log(\"Async: Copied TD link to clipboard!\");\n            },\n            function (err) {\n                console.error(\"Async: Could not copy TD to clipboard: \", err);\n            }\n        );\n    }\n}\n\nconst focusPermalinkField = () => {\n    setTimeout(() => {\n        try {\n            const textfield = document.getElementById(\"share-td-field\");\n            textfield.select();\n        } catch (_) { }\n    }, 250);\n}","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useContext, useEffect, useImperativeHandle } from 'react';\nimport ReactDOM from \"react-dom\";\nimport ediTDorContext from \"../../context/ediTDorContext\";\nimport { DialogTemplate } from \"./DialogTemplate\";\n\nexport const ConvertTmDialog = forwardRef((props, ref) => {\n    const context = useContext(ediTDorContext);\n    const [htmlInputs, setHtmlInputs] = React.useState([]);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    useEffect(() => {\n        setHtmlInputs(createHtmlInputs(context.offlineTD));\n    }, [context]);\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={() => convertTmToTd(context.offlineTD, htmlInputs)}\n                submitText={\"Generate TD\"}\n                children={htmlInputs}\n                title={\"Generate TM From TD\"}\n                description={\"Please provide values to switch the placeholders with.\"}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\n\nconst createHtmlInputs = (td) => {\n    try {\n        let regex = /{{/gi,\n            result,\n            startIindices = [];\n        while ((result = regex.exec(td))) {\n            startIindices.push(result.index);\n        }\n        regex = /}}/gi;\n        let endIndices = [];\n        while ((result = regex.exec(td))) {\n            endIndices.push(result.index);\n        }\n        let placeholders = [];\n        for (let i = 0; i < startIindices.length; i++) {\n            placeholders.push(td.slice(startIindices[i] + 2, endIndices[i]));\n        }\n        placeholders = [...new Set(placeholders)];\n        const htmlInputs = placeholders.map((holder) => {\n            return (\n                <div key={holder} className=\"py-1\">\n                    <label htmlFor={holder} className=\"text-sm text-gray-400 font-medium pl-2\">{holder}:</label>\n                    <input\n                        type=\"text\"\n                        name={holder}\n                        id={holder}\n                        className=\"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500\"\n                        placeholder=\"Enter a value...\"\n                    />\n                </div>\n            );\n        });\n        return htmlInputs;\n    } catch (e) {\n        console.log(e);\n        return [];\n    }\n};\n\nconst convertTmToTd = (td, htmlInputs) => {\n    let mappingObject = {}\n    htmlInputs.forEach((y) => {\n        const elem = document.getElementById(y.key)\n        mappingObject[y.key] = elem.value\n        return elem.value\n    });\n    Object.keys(mappingObject).forEach(key => {\n        td = td.split(`{{${key}}}`).join(mappingObject[key])\n    })\n    const parse = JSON.parse(td);\n    const permalink = `${window.location.href}?td=${encodeURI(JSON.stringify(parse))}`\n    window.open(permalink, \"_blank\");\n}\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { forwardRef, useImperativeHandle, useContext } from 'react';\nimport ReactDOM from \"react-dom\";\nimport { DialogTemplate } from \"./DialogTemplate\";\nimport ediTDorContext from '../../context/ediTDorContext';\nimport { ChevronDown } from 'react-feather';\n\nexport const CreateTdDialog = forwardRef((props, ref) => {\n    const context = useContext(ediTDorContext);\n    const [display, setDisplay] = React.useState(() => { return false });\n\n    useImperativeHandle(ref, () => {\n        return {\n            openModal: () => open(),\n            close: () => close()\n        }\n    });\n\n    const open = () => {\n        setDisplay(true)\n    };\n\n    const close = () => {\n        setDisplay(false);\n    };\n\n    const content = buildForm();\n\n    if (display) {\n        return ReactDOM.createPortal(\n            <DialogTemplate\n                onCancel={close}\n                onSubmit={() => {\n                    context.updateOfflineTD(JSON.stringify(createNewTD(), null, \"\\t\"), \"AppHeader\");\n                    close();\n                }}\n                children={content}\n                submitText={\"Create TD\"}\n                title={\"Create a New TD\"}\n                description={\"To quickly create a basis for your new TD just fill out this little template and we'll get you going.\"}\n            />,\n            document.getElementById(\"modal-root\"));\n    }\n\n    return null;\n});\n\n\nconst buildForm = () => {\n    return <>\n        {formField(\"ID\", \"urn:thing-id\", \"thing-id\", \"url\", \"autoFocus\")}\n        {formField(\"Title\", \"Thing Title\", \"thing-title\", \"text\")}\n        {formField(\"Base\", \"http://www.example.com/thing-path\", \"thing-base\", \"url\")}\n        <label htmlFor=\"thing-description\" className=\"text-sm text-gray-400 font-medium pl-2\">Description:</label>\n        <textarea id=\"thing-description\" rows=\"5\"\n            className=\"bg-gray-600\n                sm:text-sm\n                appearance-none \n                border-2 border-gray-600 rounded w-full \n                p-2\n                text-white \n                leading-tight \n                focus:outline-none \n                focus:border-blue-500\"\n            placeholder=\"A short description about this new Thing...\" />\n        <label htmlFor=\"thing-security\" className=\"text-sm text-gray-400 font-medium pl-2\">Security:</label>\n        <div className=\"relative\">\n            <select className=\"block appearance-none w-full bg-gray-600 border-2 border-gray-600 text-white py-3 px-4 pr-8 rounded leading-tight focus:border-blue-500 focus:outline-none\" id=\"thing-security\">\n                <option>nosec</option>\n                <option>basic</option>\n                <option>digest</option>\n                <option>bearer</option>\n                <option>psk</option>\n                <option>oauth2</option>\n                <option>apikey</option>\n            </select>\n            <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                <ChevronDown color=\"#cacaca\"></ChevronDown>\n            </div>\n        </div>\n    </>;\n}\n\nconst formField = (label, placeholder, id, type, autoFocus) => {\n    return <div key={id} className=\"py-1\">\n        <label htmlFor={id} className=\"text-sm text-gray-400 font-medium pl-2\">{label}:</label>\n        <input\n            name={id}\n            id={id}\n            className=\"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500\"\n            placeholder={placeholder}\n            type={type}\n            autoFocus={autoFocus === 'autoFocus'}\n        />\n    </div>;\n}\n\nconst createNewTD = () => {\n    let id = document.getElementById('thing-id').value;\n    let title = document.getElementById('thing-title').value;\n    let base = document.getElementById('thing-base').value;\n\n    let tdDescription = document.getElementById('thing-description').value;\n    let tdSecurity = document.getElementById('thing-security').value;\n\n    var thing = {};\n\n    thing[\"@context\"] = \"https://www.w3.org/2019/wot/td/v1\";\n    thing[\"title\"] = title !== \"\" ? title : \"ediTDor Thing\";\n\n    if (id !== \"\") {\n        thing[\"id\"] = id !== \"\" ? id : \"urn:editdor-thing-id\";\n    }\n\n    if (base !== \"\") {\n        thing[\"base\"] = base !== \"\" ? base : \"/\";\n    }\n\n    if (tdDescription !== \"\") {\n        thing[\"description\"] = tdDescription;\n    }\n\n    let securityDefinitions = {};\n    securityDefinitions[`${tdSecurity}_sc`] = { scheme: tdSecurity };\n\n    thing[\"securityDefinitions\"] = securityDefinitions;\n    thing[\"security\"] = `${tdSecurity}_sc`;\n\n    thing[\"properties\"] = {};\n    thing[\"actions\"] = {};\n    thing[\"events\"] = {};\n\n    return thing;\n}","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n *\n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n *\n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useCallback, useContext, useEffect } from \"react\";\nimport logo from \"../../../assets/editdor.png\";\nimport wot from \"../../../assets/WoT.png\";\nimport ediTDorContext from \"../../../context/ediTDorContext\";\nimport \"../../../assets/main.css\";\nimport \"../App.css\"\nimport Button from \"./Button\";\nimport { ShareDialog } from \"../../Dialogs/ShareDialog\";\nimport { ConvertTmDialog } from \"../../Dialogs/ConvertTmDialog\";\nimport { CreateTdDialog } from \"../../Dialogs/CreateTdDialog\";\n\nexport default function AppHeader() {\n  const context = useContext(ediTDorContext);\n  /**\n   * Check if the Browser Supports the new Native File System Api (Chromium 86.0)\n   */\n  const hasNativeFS = useCallback(() => {\n    return (\n      \"chooseFileSystemEntries\" in window || \"showOpenFilePicker\" in window\n    );\n  }, []);\n\n  const verifyDiscard = useCallback(async () => {\n    if (!context.isModified) {\n      return true;\n    }\n\n    console.log(\"verifyDiscard\", context.isModified);\n    const msg =\n      \"Discard changes? All changes you made to your TD will be lost.\";\n    return await window.confirm(msg);\n  }, [context.isModified]);\n\n  /**\n   *\n   * @param {*} file\n   *\n   * Read file content\n   */\n  const read = useCallback((file) => {\n    return file.text ? file.text() : _readFileHTML5(file);\n  }, []);\n\n  const readFile = useCallback(\n    async (file, fileHandle) => {\n      try {\n        context.updateOfflineTD(await read(file));\n        context.setFileHandle(fileHandle || file.name);\n        context.updateIsModified(false);\n      } catch (ex) {\n        const msg = `An error occured reading ${context.offlineTD}`;\n        console.error(msg, ex);\n        //TODO: Replace with custom alert\n        alert(msg);\n      }\n    },\n    [context, read]\n  );\n\n  /**\n   *\n   * @param {*} _\n   *\n   * Open File from Filesystem\n   */\n  const openFile = useCallback(\n    async (_) => {\n      if (!(await verifyDiscard())) {\n        return;\n      }\n\n      if (!hasNativeFS()) {\n        const file = await getFileHTML5();\n        if (file) {\n          await readFile(file);\n        }\n        return;\n      }\n\n      let fileHandle;\n      try {\n        fileHandle = await getFileHandle();\n        const file = await fileHandle.getFile();\n        await readFile(file, fileHandle);\n      } catch (ex) {\n        const msg = \"We ran into an error trying to open your TD.\";\n        console.error(msg, ex);\n        alert(msg);\n      }\n    },\n    [readFile, verifyDiscard, hasNativeFS]\n  );\n\n  const writeFile = useCallback(\n    async (fileHandle, contents) => {\n      if (fileHandle.createWriter) {\n        const writer = await fileHandle.createWriter();\n        await writer.write(0, contents);\n        await writer.close();\n        return;\n      }\n\n      const writable = await fileHandle.createWritable();\n      await writable.write(contents);\n      await writable.close();\n\n      // refresh td for rendered view\n      setTimeout(() => {\n        context.updateOfflineTD(contents, \"AppHEader\");\n        context.updateIsModified(false);\n      }, 500);\n    },\n    [context]\n  );\n\n  const saveAsHTML5 = useCallback((filename, contents) => {\n    const aDownload = document.getElementById(\"aDownload\");\n    filename = filename || \"untitled.txt\";\n    const opts = { type: \"text/plain\" };\n    const file = new File([contents], \"\", opts);\n    aDownload.href = window.URL.createObjectURL(file);\n    aDownload.setAttribute(\"download\", filename);\n    aDownload.click();\n  }, []);\n\n  const saveFileAs = useCallback(async () => {\n    if (!hasNativeFS()) {\n      saveAsHTML5(context.name, context.offlineTD);\n      return;\n    }\n\n    let fileHandle;\n    try {\n      fileHandle = await getNewFileHandle();\n    } catch (ex) {\n      const msg = \"We ran into an error trying to save your TD.\";\n      console.error(msg, ex);\n      return alert(msg);\n    }\n\n    try {\n      await writeFile(fileHandle, context.offlineTD);\n      context.setFileHandle(fileHandle);\n      context.updateIsModified(false);\n    } catch (ex) {\n      const msg = \"Unfortunately we were unable to save your TD.\";\n      console.error(msg, ex);\n      alert(msg);\n    }\n  }, [saveAsHTML5, hasNativeFS, context, writeFile]);\n\n  const saveFile = useCallback(async () => {\n    try {\n      if (!context.fileHandle) {\n        return await saveFileAs();\n      }\n      await writeFile(context.fileHandle, context.offlineTD);\n    } catch (ex) {\n      const msg = \"Unfortunately we were unable to save your TD.\";\n      console.error(msg, ex);\n      alert(msg);\n    }\n  }, [context, saveFileAs, writeFile]);\n\n  /**\n   * Reading files with HTML5 input\n   */\n  const getFileHTML5 = async () => {\n    return new Promise((resolve, reject) => {\n      const fileInput = document.getElementById(\"fileInput\");\n      fileInput.onchange = (e) => {\n        const file = fileInput.files[0];\n        if (file) {\n          return resolve(file);\n        }\n        return reject(new Error(\"AbortError\"));\n      };\n      fileInput.click();\n    });\n  };\n\n  /**\n   * File Handle from native filesystem api\n   * Only JSON/JSON+LD Files are supported\n   */\n  const getFileHandle = () => {\n    const opts = {\n      types: [\n        {\n          description: \"Thing Description\",\n          accept: { \"application/ld+json\": [\".jsonld\", \".json\"] },\n        },\n      ],\n    };\n    if (\"showOpenFilePicker\" in window) {\n      return window.showOpenFilePicker(opts).then((handles) => handles[0]);\n    }\n    return window.chooseFileSystemEntries();\n  };\n\n  const getNewFileHandle = async () => {\n    // new file system api\n    if (\"showSaveFilePicker\" in window) {\n      const opts = {\n        types: [\n          {\n            description: \"Thing Description\",\n            accept: { \"application/ld+json\": [\".jsonld\", \".json\"] },\n          },\n        ],\n      };\n\n      return await window.showSaveFilePicker(opts);\n    }\n\n    // old html file input\n    const opts = {\n      type: \"save-file\",\n      accepts: [\n        {\n          description: \"Thing Description\",\n          extensions: [\".jsonld\", \".json\"],\n          mimeTypes: [\"application/ld+json\"],\n        },\n      ],\n    };\n\n    return await window.chooseFileSystemEntries(opts);\n  };\n\n  const _readFileHTML5 = (file) => {\n    return new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.addEventListener(\"loadend\", (event) => {\n        const text = event.srcElement.result;\n        return resolve(text);\n      });\n      reader.readAsText(file);\n    });\n  };\n\n  useEffect(() => {\n    if (window.location.search.indexOf(\"td\") > -1) {\n      const url = new URL(window.location.href);\n      const td = url.searchParams.get(\"td\");\n      try{\n        const parsedTD = JSON.parse(td);\n        context.updateOfflineTD(JSON.stringify(parsedTD, null, 2));\n      }catch(error) {\n        alert('Sorry, we were unable to parse the TD given in the URL')\n      }\n    }\n    //because the GET Param should be only loaded once, the next line was added\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    const shortcutHandler = (e) => {\n      if (\n        (window.navigator.platform.match(\"Mac\") ? e.metaKey : e.ctrlKey) &&\n        e.key === \"s\"\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        saveFile();\n      }\n      if (\n        (window.navigator.platform.match(\"Mac\") ? e.metaKey : e.ctrlKey) &&\n        e.key === \"o\"\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        openFile();\n      }\n      if (\n        (window.navigator.platform.match(\"Mac\") ? e.metaKey : e.ctrlKey) &&\n        e.key === \"n\"\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        openCreateTdDialog();\n      }\n    };\n\n    // Adding Eventlistener for shortcuts\n    document.addEventListener(\"keydown\", shortcutHandler, false);\n    window.onbeforeunload = function (event) {\n      var message =\n        \"Important: Please click on 'Save' button to leave this page.\";\n      if (typeof event == \"undefined\") {\n        event = window.event;\n      }\n      if (event) {\n        event.returnValue = message;\n      }\n      return message;\n    };\n    return () => {\n      //Remove Eventlistener for shortcuts before unmounting component\n      document.removeEventListener(\"keydown\", shortcutHandler, false);\n    };\n  }, [openFile, saveFile, context]);\n\n  const convertTmDialog = React.useRef();\n  const openConvertTmDialog = () => { convertTmDialog.current.openModal() }\n\n  const shareDialog = React.useRef();\n  const openShareDialog = () => { shareDialog.current.openModal() }\n\n  const createTdDialog = React.useRef();\n  const openCreateTdDialog = () => { createTdDialog.current.openModal() }\n\n  return (\n    <>\n      <header className=\"flex justify-between items-center h-16 bg-blue-500\">\n        <div className=\"flex items-center\">\n          <img className=\"pl-2 h-12\" src={wot} alt=\"WOT\" />\n          <div className=\"w-2\"></div>\n          <img className=\"pl-2 h-8\" src={logo} alt=\"LOGO\" />\n        </div>\n        <div className=\"flex space-x-2 pr-2\">\n          <Button onClick={openShareDialog}>Share</Button>\n          <Button onClick={openCreateTdDialog}>New</Button>\n          <Button onClick={openFile}>Open</Button>\n          <Button onClick={saveFile}>Save</Button>\n          <Button onClick={saveFileAs}>Save As</Button>\n          {context.isThingModel && <Button onClick={openConvertTmDialog}>Convert To TD</Button>}\n        </div>\n      </header>\n      <ConvertTmDialog ref={convertTmDialog} />\n      <ShareDialog ref={shareDialog} />\n      <CreateTdDialog ref={createTdDialog} />\n      <input\n        className=\"h-0\"\n        type=\"file\"\n        id=\"fileInput\"\n        style={{ display: \"none\" }}\n      ></input>\n      <a className=\"h-0\" id=\"aDownload\" href=\"/\" style={{ display: \"none\" }}>\n        download\n      </a>\n    </>\n  );\n}\n","/********************************************************************************\n * Copyright (c) 2018 - 2021 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useContext } from 'react';\nimport ediTDorContext from '../../context/ediTDorContext';\n\nconst AppFooter = (props) => {\n    const context = useContext(ediTDorContext);\n    let megaBytes = 0\n    let propertiesCount = 0\n    let actionsCount = 0\n    let eventsCount = 0\n    try {\n        const parse = JSON.parse(context.offlineTD)\n        const size = new TextEncoder().encode(JSON.stringify(parse)).length\n        megaBytes = formatByteSize(size);\n        propertiesCount = parse.properties ? Object.keys(parse.properties).length : 0\n        actionsCount = parse.properties ? Object.keys(parse.actions).length : 0\n        eventsCount = parse.properties ? Object.keys(parse.events).length : 0\n    }\n    catch (e) {\n        // console.log(e)\n    }\n    return (<>\n        <footer className=\"bg-blue-500 h-8 flex flex-col items-center justify-center text-white\">\n            <div className=\"flex flex-row items-center justify-start w-full\">\n                <div className=\"mx-2\">Properties: {propertiesCount}</div>\n                <div className=\"mx-2\">Actions: {actionsCount}</div>\n                <div className=\"mx-2\">Events: {eventsCount}</div>\n                <div className=\"mx-2 flex-grow\">Size: {megaBytes}</div>\n                <div className=\"mx-2 justify-self-end\">Version: {process.env.REACT_APP_NPM_PACKAGE_VERSION} | <u><a href=\"https://github.com/eclipse/editdor\" target=\"_blank\" rel=\"noopener noreferrer\">We are on GitHub</a></u></div>\n            </div>\n        </footer>\n    </>\n    );\n}\n\nfunction formatByteSize(bytes) {\n    if(bytes < 1024) return bytes + \" bytes\";\n    else if(bytes < 1048576) return(bytes / 1024).toFixed(3) + \" KiB\";\n    else if(bytes < 1073741824) return(bytes / 1048576).toFixed(3) + \" MiB\";\n    else return(bytes / 1073741824).toFixed(3) + \" GiB\";\n};\n\n\nexport default AppFooter","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nexport const UPDATE_OFFLINE_TD = 'UPDATE_OFFLINE_TD';\nexport const UPDATE_IS_MODFIED = 'UPDATE_IS_MODFIED';\nexport const UPDATE_IS_THINGMODEL = 'UPDATE_IS_THINGMODEL';\nexport const SET_FILE_HANDLE = 'SET_FILE_HANDLE';\nexport const REMOVE_FORM_FROM_TD = 'REMOVE_FORM_FROM_TD';\nexport const ADD_PROPERTYFORM_TO_TD = 'ADD_PROPERTYFORM_TO_TD';\nexport const ADD_ACTIONFORM_TO_TD = 'ADD_ACTIONFORM_TO_TD';\nexport const ADD_EVENTFORM_TO_TD = 'ADD_EVENTFORM_TO_TD';\nexport const REMOVE_ONE_OF_A_KIND_FROM_TD = 'REMOVE_ONE_OF_A_KIND_FROM_TD';\n\nconst updateOfflineTDReducer = (offlineTD, state) => {\n  return { ...state, offlineTD, isModified: true };\n};\n\nconst removeFormReducer = (form, state) => {\n  let offlineTD = JSON.parse(state.offlineTD)\n  console.log(form);\n  if (form.type === 'forms') {\n    offlineTD.forms.forEach((element, i) => {\n      if (typeof (element.op) === 'string') {\n          offlineTD.forms.splice(i, 1)\n      } else {\n        if (element.href === form.form.href && element.op.indexOf(form.form.op) !== -1) {\n          element.op.splice(element.op.indexOf(form.form.op), 1)\n        }\n        if (element.op.length === 0) {\n          offlineTD.forms.splice(i, 1)\n        }\n      }\n    });\n  } else {\n    try {\n      offlineTD[form.type][form.propName].forms.forEach((element, i) => {\n        if (typeof (element.op) === 'string') {\n          if (element.href === form.form.href) {\n            offlineTD[form.type][form.propName].forms.splice(i, 1)\n          }\n        } else {\n          if (element.href === form.form.href && element.op.indexOf(form.form.op) !== -1) {\n            element.op.splice(element.op.indexOf(form.form.op), 1)\n          }\n          if (element.op.length === 0) {\n            offlineTD[form.type][form.propName].forms.splice(i, 1)\n          }\n        }\n      });\n    } catch (e) {\n      alert('Sorry we were unable to delete the Form.');\n    }\n  }\n  return { ...state, offlineTD: JSON.stringify(offlineTD, null, 2) };\n};\n\nconst removeOneOfAKindReducer = (kind, oneOfAKindName, state) => {\n  let offlineTD = JSON.parse(state.offlineTD)\n  try {\n    delete offlineTD[kind][oneOfAKindName]\n  } catch (e) {\n    alert('Sorry we were unable to delete the Form.');\n  }\n  return { ...state, offlineTD: JSON.stringify(offlineTD, null, 2) };\n};\n\nconst addPropertyFormReducer = (form, state) => {\n  let offlineTD = JSON.parse(state.offlineTD)\n  const property = offlineTD.properties[form.propName];\n  if (property.forms === undefined) {\n    property.forms = []\n  }\n  property.forms.push(form.form);\n  return { ...state, offlineTD: JSON.stringify(offlineTD, null, 2) };\n};\n\nconst addActionFormReducer = (params, state) => {\n  let offlineTD = JSON.parse(state.offlineTD)\n  const action = offlineTD.actions[params.actionName];\n  console.log('ActionForms', action.forms)\n  if (action.forms === undefined) {\n    action.forms = []\n  }\n  action.forms.push(params.form);\n  return { ...state, offlineTD: JSON.stringify(offlineTD, null, 2) };\n};\n\nconst addEventFormReducer = (params, state) => {\n  let offlineTD = JSON.parse(state.offlineTD)\n  const event = offlineTD.events[params.eventName];\n  if (event.forms === undefined) {\n    event.forms = []\n  }\n  event.forms.push(params.form);\n  return { ...state, offlineTD: JSON.stringify(offlineTD, null, 2) };\n};\n\nconst updateIsModified = (isModified, state) => {\n  return { ...state, isModified: isModified };\n};\n\nconst updateIsThingModel = (isThingModel, state) => {\n  return { ...state, isThingModel: isThingModel };\n};\n\nconst updateFileHandleReducer = (fileHandle, state) => {\n  return { ...state, fileHandle: fileHandle };\n};\n\nconst editdorReducer = (state, action) => {\n  switch (action.type) {\n    case UPDATE_OFFLINE_TD:\n      return updateOfflineTDReducer(action.offlineTD, state);\n    case UPDATE_IS_MODFIED:\n      return updateIsModified(action.isModified, state);\n    case UPDATE_IS_THINGMODEL:\n      return updateIsThingModel(action.isThingModel, state);\n    case SET_FILE_HANDLE:\n      const newState = updateFileHandleReducer(action.fileHandle, state)\n      return newState;\n    case REMOVE_FORM_FROM_TD:\n      return removeFormReducer(action.form, state)\n    case REMOVE_ONE_OF_A_KIND_FROM_TD:\n      return removeOneOfAKindReducer(action.kind, action.oneOfAKindName, state)\n    case ADD_PROPERTYFORM_TO_TD:\n      return addPropertyFormReducer(action.form, state)\n    case ADD_ACTIONFORM_TO_TD:\n      return addActionFormReducer(action.params, state)\n    case ADD_EVENTFORM_TO_TD:\n      return addEventFormReducer(action.params, state)\n    default:\n      return state;\n  }\n};\n\nexport { editdorReducer }","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useReducer } from 'react';\n\nimport EdiTDorContext from './ediTDorContext';\nimport { editdorReducer, REMOVE_FORM_FROM_TD, UPDATE_IS_THINGMODEL, SET_FILE_HANDLE, UPDATE_IS_MODFIED, UPDATE_OFFLINE_TD, ADD_PROPERTYFORM_TO_TD, ADD_ACTIONFORM_TO_TD, ADD_EVENTFORM_TO_TD, REMOVE_ONE_OF_A_KIND_FROM_TD } from './editorReducers';\n\n\nconst GlobalState = props => {\n  const [editdorState, dispatch] = useReducer(editdorReducer, { offlineTD: '', theme: 'dark' });\n\n  const updateOfflineTD = (offlineTD, props) => {\n    dispatch({ type: UPDATE_OFFLINE_TD, offlineTD: offlineTD });\n  };\n\n  const updateIsModified = isModified => {\n    dispatch({ type: UPDATE_IS_MODFIED, isModified: isModified });\n  };\n\n  const updateIsThingModel = isThingModel => {\n    dispatch({ type: UPDATE_IS_THINGMODEL, isThingModel: isThingModel });\n  };\n\n  const setFileHandle = fileHandle => {\n    dispatch({ type: SET_FILE_HANDLE, fileHandle: fileHandle });\n  };\n\n  const removeForm = form => {\n    dispatch({ type: REMOVE_FORM_FROM_TD, form: form });\n  };\n\n  const addForm = form => {\n    dispatch({ type: ADD_PROPERTYFORM_TO_TD, form: form });\n  };\n\n  const addActionForm = params => {\n    dispatch({ type: ADD_ACTIONFORM_TO_TD, params: params });\n  };\n  const addEventForm = params => {\n    dispatch({ type: ADD_EVENTFORM_TO_TD, params: params });\n  };\n  const removeOneOfAKindReducer = (kind, oneOfAKindName) => {\n    dispatch({ type: REMOVE_ONE_OF_A_KIND_FROM_TD, kind, oneOfAKindName });\n  };\n\n  return (\n    <EdiTDorContext.Provider\n      value={{\n        offlineTD: editdorState.offlineTD,\n        theme: editdorState.theme,\n        isModified: editdorState.isModified,\n        isThingModel: editdorState.isThingModel,\n        name: editdorState.name,\n        fileHandle: editdorState.fileHandle,\n        updateOfflineTD,\n        updateIsModified,\n        updateIsThingModel,\n        setFileHandle,\n        removeForm,\n        addForm,\n        addActionForm,\n        addEventForm,\n        removeOneOfAKindReducer\n      }}\n    >\n      {props.children}\n    </EdiTDorContext.Provider>\n  );\n};\n\nexport default GlobalState;","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React, { useEffect } from 'react';\nimport './App.css';\nimport TDViewer from '../TDViewer/TDViewer'\nimport JSONEditorComponent from \"../Editor/Editor\";\nimport AppHeader from './AppHeader/AppHeader';\nimport AppFooter from './AppFooter';\nimport GlobalState from '../../context/GlobalState';\n\nimport '../../assets/main.css'\n\nconst App = (props) => {\n    useEffect(() => { dragElement(document.getElementById(\"separator\"), \"H\"); }, [props])\n    return (\n        <GlobalState>\n            <main className=\"h-full w-screen flex flex-col\">\n                <AppHeader></AppHeader>\n                <div className=\"flex-grow splitter flex flex-row w-full height-adjust\">\n                    <div className=\"w-5/12\" id=\"first\"><JSONEditorComponent /></div>\n                    <div id=\"separator\"></div>\n                    <div className=\"w-7/12\" id=\"second\"><TDViewer /></div>\n                </div>\n                <AppFooter></AppFooter>\n                <div id=\"modal-root\"></div>\n            </main>\n        </GlobalState>\n    );\n}\n\n\n/**\n * \n * @param {*} element \n * @param {*} direction \n * \n * Adjust size of the two Panels \"first\" and \"second\"\n */\nconst dragElement = (element, direction) => {\n    let md;\n    const first = document.getElementById(\"first\");\n    const second = document.getElementById(\"second\");\n\n    const onMouseMove = (e) => {\n        var delta = {\n            x: e.clientX - md.e.clientX,\n            y: e.clientY - md.e.clientY\n        };\n\n        if (direction === \"H\") {\n            delta.x = Math.min(Math.max(delta.x, -md.firstWidth),\n                md.secondWidth);\n\n            element.style.left = md.offsetLeft + delta.x + \"px\";\n            first.style.width = (md.firstWidth + delta.x) + \"px\";\n            second.style.width = (md.secondWidth - delta.x) + \"px\";\n        }\n    }\n\n    const onMouseDown = (e) => {\n        md = {\n            e,\n            offsetLeft: element.offsetLeft,\n            offsetTop: element.offsetTop,\n            firstWidth: first.offsetWidth,\n            secondWidth: second.offsetWidth\n        };\n        document.onmousemove = onMouseMove;\n        document.onmouseup = () => {\n            document.onmousemove = document.onmouseup = null;\n        }\n    }\n\n    element.onmousedown = onMouseDown;\n}\n\nexport default App;","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/********************************************************************************\n * Copyright (c) 2018 - 2020 Contributors to the Eclipse Foundation\n * \n * See the NOTICE file(s) distributed with this work for additional\n * information regarding copyright ownership.\n * \n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0, or the W3C Software Notice and\n * \n * SPDX-License-Identifier: EPL-2.0 OR W3C-20150513\n ********************************************************************************/\nimport React from 'react';\nimport ReactDOM from 'react-dom'; \nimport './assets/main.css'\nimport './index.css'\nimport App from './components/App/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n// No PWA at the moment.\nserviceWorker.register();\n"],"sourceRoot":""}